{
    "sourceFile": "src/pages/TournamentList.svelte",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1763989151779,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764017152312,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,7 @@\n <script lang=\"ts\">\r\n   import { onMount } from 'svelte';\r\n-  import { getTournaments, createTournament } from '$lib/api';\r\n+  import { getTournaments, createTournament, deleteTournament } from '$lib/api';\r\n \r\n   let tournaments: any[] = [];\r\n   let newTournamentName = '';\r\n   let showCreateForm = false;\r\n@@ -21,8 +21,21 @@\n     // Navigate to the new tournament\r\n     window.location.href = `/tournament/${result.id}`;\r\n   }\r\n \r\n+  async function handleDeleteTournament(event: MouseEvent, tournamentId: string) {\r\n+    event.stopPropagation(); // Prevent navigation when clicking the delete button\r\n+    if (confirm('Are you sure you want to permanently delete this tournament?')) {\r\n+      try {\r\n+        await deleteTournament(tournamentId);\r\n+        await loadTournaments(); // Refresh the list\r\n+      } catch (error) {\r\n+        console.error('Failed to delete tournament:', error);\r\n+        alert('Could not delete the tournament.');\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n   function navigateToTournament(tournamentId: string) {\r\n     window.location.href = `/tournament/${tournamentId}`;\r\n   }\r\n \r\n@@ -93,11 +106,20 @@\n       {:else}\r\n         <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n           {#each tournaments as tournament}\r\n             <div\r\n-              class=\"glass rounded-lg p-4 shadow-xl hover:shadow-cyber-green/20 hover:scale-105 transition-all duration-300 card-entrance cursor-pointer\"\r\n+              class=\"glass rounded-lg p-4 shadow-xl hover:shadow-cyber-green/20 hover:scale-105 transition-all duration-300 card-entrance cursor-pointer relative\"\r\n               onclick={() => navigateToTournament(tournament.id)}\r\n             >\r\n+              <!-- Delete Button -->\r\n+              <button\r\n+                onclick={(e) => handleDeleteTournament(e, tournament.id)}\r\n+                class=\"absolute top-2 right-2 p-1.5 rounded-full bg-red-600/20 text-red-400 hover:bg-red-500/40 hover:text-red-300 transition-all z-10\"\r\n+                title=\"Delete Tournament\"\r\n+              >\r\n+                <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path></svg>\r\n+              </button>\r\n+\r\n               <div class=\"flex items-center justify-between mb-3\">\r\n                 <h3 class=\"text-lg font-bold text-white truncate\">{tournament.name}</h3>\r\n                 <span class=\"px-2 py-1 bg-cyber-green/20 border border-cyber-green rounded text-cyber-green font-bold text-xs uppercase\">\r\n                   {tournament.state}\r\n"
                },
                {
                    "date": 1764017756156,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -109,22 +109,27 @@\n             <div\r\n               class=\"glass rounded-lg p-4 shadow-xl hover:shadow-cyber-green/20 hover:scale-105 transition-all duration-300 card-entrance cursor-pointer relative\"\r\n               onclick={() => navigateToTournament(tournament.id)}\r\n             >\r\n-              <!-- Delete Button -->\r\n-              <button\r\n-                onclick={(e) => handleDeleteTournament(e, tournament.id)}\r\n-                class=\"absolute top-2 right-2 p-1.5 rounded-full bg-red-600/20 text-red-400 hover:bg-red-500/40 hover:text-red-300 transition-all z-10\"\r\n-                title=\"Delete Tournament\"\r\n-              >\r\n-                <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path></svg>\r\n-              </button>\r\n+              <div class=\"flex items-center justify-between mb-3\">\r\n+                <div class=\"flex items-center gap-2 min-w-0\">\r\n+                  <h3 class=\"text-lg font-bold text-white truncate\">{tournament.name}</h3>\r\n+                </div>\r\n \r\n-              <div class=\"flex items-center justify-between mb-3\">\r\n-                <h3 class=\"text-lg font-bold text-white truncate\">{tournament.name}</h3>\r\n-                <span class=\"px-2 py-1 bg-cyber-green/20 border border-cyber-green rounded text-cyber-green font-bold text-xs uppercase\">\r\n-                  {tournament.state}\r\n-                </span>\r\n+                <div class=\"flex items-center gap-2\">\r\n+                  <span class=\"px-2 py-1 bg-cyber-green/20 border border-cyber-green rounded text-cyber-green font-bold text-xs uppercase\">\r\n+                    {tournament.state}\r\n+                  </span>\r\n+\r\n+                  <!-- Delete Button (now in header flow, not absolute) -->\r\n+                  <button\r\n+                    onclick={(e) => handleDeleteTournament(e, tournament.id)}\r\n+                    class=\"p-1.5 rounded-full bg-red-600/20 text-red-400 hover:bg-red-500/40 hover:text-red-300 transition-all\"\r\n+                    title=\"Delete Tournament\"\r\n+                  >\r\n+                    <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z\" clip-rule=\"evenodd\"></path></svg>\r\n+                  </button>\r\n+                </div>\r\n               </div>\r\n \r\n               <div class=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                 <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"/></svg>\r\n"
                }
            ],
            "date": 1763989151779,
            "name": "Commit-0",
            "content": "<script lang=\"ts\">\r\n  import { onMount } from 'svelte';\r\n  import { getTournaments, createTournament } from '$lib/api';\r\n\r\n  let tournaments: any[] = [];\r\n  let newTournamentName = '';\r\n  let showCreateForm = false;\r\n\r\n  async function loadTournaments() {\r\n    tournaments = await getTournaments();\r\n  }\r\n\r\n  async function handleCreateTournament() {\r\n    if (!newTournamentName.trim()) return;\r\n\r\n    const result = await createTournament(newTournamentName.trim());\r\n    newTournamentName = '';\r\n    showCreateForm = false;\r\n    await loadTournaments();\r\n\r\n    // Navigate to the new tournament\r\n    window.location.href = `/tournament/${result.id}`;\r\n  }\r\n\r\n  function navigateToTournament(tournamentId: string) {\r\n    window.location.href = `/tournament/${tournamentId}`;\r\n  }\r\n\r\n  onMount(loadTournaments);\r\n</script>\r\n\r\n<div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 py-8 px-4\">\r\n  <div class=\"w-full max-w-6xl mx-auto space-y-8\">\r\n\r\n    <!-- Header -->\r\n    <div class=\"text-center py-3 space-y-2\">\r\n      <h1 class=\"text-2xl md:text-3xl font-black gradient-text leading-tight\">\r\n        <svg class=\"w-7 h-7 inline-block\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path d=\"M10 3.5a6.5 6.5 0 106.5 6.5h-2a4.5 4.5 0 11-4.5-4.5V3.5z\"/></svg>\r\n        TOURNAMENT LOBBY\r\n      </h1>\r\n      <p class=\"text-gray-400 text-sm\">Select or create a tournament to begin</p>\r\n    </div>\r\n\r\n    <!-- Create Tournament Section -->\r\n    <div class=\"glass rounded-lg p-6 shadow-xl border border-cyber-green/20\">\r\n      {#if !showCreateForm}\r\n        <button\r\n          onclick={() => showCreateForm = true}\r\n          class=\"bg-gradient-to-r from-cyber-green to-emerald-500 hover:from-cyber-green hover:to-cyber-green text-space-900 font-bold px-6 py-3 rounded-lg shadow-glow-green transition-all duration-300 hover:scale-105 hover:shadow-xl\"\r\n        >\r\n          <svg class=\"w-5 h-5 inline-block mr-2\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z\" clip-rule=\"evenodd\"/></svg>\r\n          Create New Tournament\r\n        </button>\r\n      {:else}\r\n        <div class=\"space-y-4\">\r\n          <h3 class=\"text-lg font-bold text-cyber-green\">Create New Tournament</h3>\r\n          <div class=\"flex gap-2\">\r\n            <input\r\n              type=\"text\"\r\n              bind:value={newTournamentName}\r\n              placeholder=\"Tournament name (e.g., CS2 Finals)\"\r\n              class=\"flex-1 px-3 py-2 text-sm bg-space-700 border-2 border-space-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-cyber-green/50 focus:border-cyber-green text-white placeholder-gray-500 transition-all shadow-lg\"\r\n              onkeydown={(e) => e.key === 'Enter' && handleCreateTournament()}\r\n              maxlength=\"50\"\r\n            />\r\n            <button\r\n              onclick={handleCreateTournament}\r\n              class=\"bg-gradient-to-r from-cyber-green to-emerald-500 hover:from-cyber-green hover:to-cyber-green text-space-900 font-bold px-4 py-2 text-sm rounded-lg shadow-glow-green transition-all duration-300 hover:scale-105 hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap\"\r\n              disabled={!newTournamentName.trim()}\r\n            >\r\n              Create\r\n            </button>\r\n            <button\r\n              onclick={() => { showCreateForm = false; newTournamentName = ''; }}\r\n              class=\"bg-gray-600 hover:bg-gray-500 text-white font-bold px-4 py-2 text-sm rounded-lg transition-all duration-300\"\r\n            >\r\n              Cancel\r\n            </button>\r\n          </div>\r\n        </div>\r\n      {/if}\r\n    </div>\r\n\r\n    <!-- Tournament List -->\r\n    <div class=\"space-y-4\">\r\n      <h2 class=\"text-xl font-bold text-white text-center\">Active Tournaments</h2>\r\n\r\n      {#if tournaments.length === 0}\r\n        <div class=\"glass rounded-xl p-8 text-center shadow-xl\">\r\n          <svg class=\"w-16 h-16 mx-auto mb-4 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z\"/></svg>\r\n          <p class=\"text-gray-400 text-sm\">No tournaments created yet. Create your first tournament above!</p>\r\n        </div>\r\n      {:else}\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {#each tournaments as tournament}\r\n            <div\r\n              class=\"glass rounded-lg p-4 shadow-xl hover:shadow-cyber-green/20 hover:scale-105 transition-all duration-300 card-entrance cursor-pointer\"\r\n              onclick={() => navigateToTournament(tournament.id)}\r\n            >\r\n              <div class=\"flex items-center justify-between mb-3\">\r\n                <h3 class=\"text-lg font-bold text-white truncate\">{tournament.name}</h3>\r\n                <span class=\"px-2 py-1 bg-cyber-green/20 border border-cyber-green rounded text-cyber-green font-bold text-xs uppercase\">\r\n                  {tournament.state}\r\n                </span>\r\n              </div>\r\n\r\n              <div class=\"flex items-center gap-2 text-sm text-gray-400\">\r\n                <svg class=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"/></svg>\r\n                {tournament.playerCount} {tournament.playerCount === 1 ? 'player' : 'players'}\r\n              </div>\r\n\r\n              <div class=\"mt-3 text-center\">\r\n                <span class=\"text-xs text-gray-500\">Click to enter tournament</span>\r\n              </div>\r\n            </div>\r\n          {/each}\r\n        </div>\r\n      {/if}\r\n    </div>\r\n  </div>\r\n</div>\r\n"
        }
    ]
}