{
    "sourceFile": "src/pages/Statistics.svelte",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 17,
            "patches": [
                {
                    "date": 1764024886865,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1764024901417,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,9 @@\n   // Computed statistics\r\n   let playerStats = $derived(() => {\r\n     if (!tournamentData?.players) return [];\r\n \r\n-    return tournamentData.players.map(player => {\r\n+    return tournamentData.players.map((player: any) => {\r\n       const totalGames = player.wins + player.draws + player.losses;\r\n       const winRate = totalGames > 0 ? (player.wins / totalGames) * 100 : 0;\r\n       const avgPoints = totalGames > 0 ? player.points / totalGames : 0;\r\n \r\n@@ -23,9 +23,9 @@\n         winRate: Math.round(winRate * 10) / 10,\r\n         avgPoints: Math.round(avgPoints * 10) / 10,\r\n         performance: player.points + (player.wins * 2) + (player.draws * 1) // Custom performance metric\r\n       };\r\n-    }).sort((a, b) => b.performance - a.performance);\r\n+    }).sort((a: any, b: any) => b.performance - a.performance);\r\n   });\r\n \r\n   let matchStats = $derived(() => {\r\n     if (!tournamentData) return null;\r\n@@ -33,16 +33,16 @@\n     const groupMatches = tournamentData.matches || [];\r\n     const bracketMatches = tournamentData.bracketMatches || [];\r\n \r\n     const totalMatches = groupMatches.length + bracketMatches.length;\r\n-    const completedGroupMatches = groupMatches.filter(m => m.completed).length;\r\n-    const completedBracketMatches = bracketMatches.filter(m => m.winnerId).length;\r\n+    const completedGroupMatches = groupMatches.filter((m: any) => m.completed).length;\r\n+    const completedBracketMatches = bracketMatches.filter((m: any) => m.winnerId).length;\r\n     const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n \r\n     // Calculate win/draw/loss distribution\r\n     let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n \r\n-    groupMatches.forEach(match => {\r\n+    groupMatches.forEach((match: any) => {\r\n       if (match.result) {\r\n         Object.values(match.result).forEach((result: any) => {\r\n           if (result.points === 3) totalWins++;\r\n           else if (result.points === 1) totalDraws++;\r\n@@ -50,9 +50,9 @@\n         });\r\n       }\r\n     });\r\n \r\n-    bracketMatches.forEach(match => {\r\n+    bracketMatches.forEach((match: any) => {\r\n       if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n     });\r\n \r\n     return {\r\n@@ -70,13 +70,13 @@\n \r\n   let groupStats = $derived(() => {\r\n     if (!tournamentData?.pods) return [];\r\n \r\n-    return tournamentData.pods.map(pod => {\r\n-      const podMatches = tournamentData.matches.filter(m => m.podId === pod.id);\r\n-      const completedMatches = podMatches.filter(m => m.completed).length;\r\n-      const totalPoints = pod.players.reduce((sum, playerId) => {\r\n-        const player = tournamentData.players.find(p => p.id === playerId);\r\n+    return tournamentData.pods.map((pod: any) => {\r\n+      const podMatches = tournamentData.matches.filter((m: any) => m.podId === pod.id);\r\n+      const completedMatches = podMatches.filter((m: any) => m.completed).length;\r\n+      const totalPoints = pod.players.reduce((sum: number, playerId: string) => {\r\n+        const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n         return sum + (player?.points || 0);\r\n       }, 0);\r\n \r\n       return {\r\n"
                },
                {
                    "date": 1764025099837,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -9,44 +9,44 @@\n   let error = $state(null) as string | null;\r\n \r\n   // Computed statistics\r\n   let playerStats = $derived(() => {\r\n-    if (!tournamentData?.players) return [];\r\n+    if (!tournamentData?.players || !Array.isArray(tournamentData.players)) return [];\r\n \r\n     return tournamentData.players.map((player: any) => {\r\n-      const totalGames = player.wins + player.draws + player.losses;\r\n-      const winRate = totalGames > 0 ? (player.wins / totalGames) * 100 : 0;\r\n-      const avgPoints = totalGames > 0 ? player.points / totalGames : 0;\r\n+      const totalGames = (player.wins || 0) + (player.draws || 0) + (player.losses || 0);\r\n+      const winRate = totalGames > 0 ? ((player.wins || 0) / totalGames) * 100 : 0;\r\n+      const avgPoints = totalGames > 0 ? (player.points || 0) / totalGames : 0;\r\n \r\n       return {\r\n         ...player,\r\n         totalGames,\r\n         winRate: Math.round(winRate * 10) / 10,\r\n         avgPoints: Math.round(avgPoints * 10) / 10,\r\n-        performance: player.points + (player.wins * 2) + (player.draws * 1) // Custom performance metric\r\n+        performance: (player.points || 0) + ((player.wins || 0) * 2) + (player.draws || 0) // Custom performance metric\r\n       };\r\n-    }).sort((a: any, b: any) => b.performance - a.performance);\r\n+    }).sort((a: any, b: any) => (b.performance || 0) - (a.performance || 0));\r\n   });\r\n \r\n   let matchStats = $derived(() => {\r\n     if (!tournamentData) return null;\r\n \r\n-    const groupMatches = tournamentData.matches || [];\r\n-    const bracketMatches = tournamentData.bracketMatches || [];\r\n+    const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n+    const bracketMatches = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n \r\n     const totalMatches = groupMatches.length + bracketMatches.length;\r\n-    const completedGroupMatches = groupMatches.filter((m: any) => m.completed).length;\r\n+    const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n     const completedBracketMatches = bracketMatches.filter((m: any) => m.winnerId).length;\r\n     const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n \r\n     // Calculate win/draw/loss distribution\r\n     let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n \r\n     groupMatches.forEach((match: any) => {\r\n-      if (match.result) {\r\n+      if (match.result && typeof match.result === 'object') {\r\n         Object.values(match.result).forEach((result: any) => {\r\n-          if (result.points === 3) totalWins++;\r\n-          else if (result.points === 1) totalDraws++;\r\n+          if (result && typeof result === 'object' && result.points === 3) totalWins++;\r\n+          else if (result && typeof result === 'object' && result.points === 1) totalDraws++;\r\n           else totalLosses++;\r\n         });\r\n       }\r\n     });\r\n@@ -68,25 +68,25 @@\n     };\r\n   });\r\n \r\n   let groupStats = $derived(() => {\r\n-    if (!tournamentData?.pods) return [];\r\n+    if (!tournamentData?.pods || !Array.isArray(tournamentData.pods) || !tournamentData.players || !Array.isArray(tournamentData.players)) return [];\r\n \r\n     return tournamentData.pods.map((pod: any) => {\r\n-      const podMatches = tournamentData.matches.filter((m: any) => m.podId === pod.id);\r\n-      const completedMatches = podMatches.filter((m: any) => m.completed).length;\r\n-      const totalPoints = pod.players.reduce((sum: number, playerId: string) => {\r\n+      const podMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches.filter((m: any) => m.podId === pod.id) : [];\r\n+      const completedMatches = podMatches.filter((m: any) => m.completed === true).length;\r\n+      const totalPoints = Array.isArray(pod.players) ? pod.players.reduce((sum: number, playerId: string) => {\r\n         const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n         return sum + (player?.points || 0);\r\n-      }, 0);\r\n+      }, 0) : 0;\r\n \r\n       return {\r\n         ...pod,\r\n         totalMatches: podMatches.length,\r\n         completedMatches,\r\n         completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n         totalPoints,\r\n-        avgPoints: pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n+        avgPoints: Array.isArray(pod.players) && pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n       };\r\n     });\r\n   });\r\n \r\n@@ -97,12 +97,12 @@\n     const currentTime = new Date();\r\n     const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n \r\n     return {\r\n-      name: tournamentData.name,\r\n-      state: tournamentData.state,\r\n-      playerCount: tournamentData.players?.length || 0,\r\n-      groupCount: tournamentData.pods?.length || 0,\r\n+      name: tournamentData.name || 'Unknown Tournament',\r\n+      state: tournamentData.state || 'unknown',\r\n+      playerCount: Array.isArray(tournamentData.players) ? tournamentData.players.length : 0,\r\n+      groupCount: Array.isArray(tournamentData.pods) ? tournamentData.pods.length : 0,\r\n       duration: `${duration} minutes`,\r\n       isCompleted: tournamentData.state === 'completed'\r\n     };\r\n   });\r\n"
                },
                {
                    "date": 1764025277614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -7,105 +7,119 @@\n   let tournamentData = $state(null) as any;\r\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n \r\n-  // Computed statistics\r\n-  let playerStats = $derived(() => {\r\n-    if (!tournamentData?.players || !Array.isArray(tournamentData.players)) return [];\r\n+  // Reactive statements to compute statistics\r\n+  let playerStats: any[] = $state([]);\r\n+  let matchStats: any = $state(null);\r\n+  let groupStats: any[] = $state([]);\r\n+  let tournamentOverview: any = $state(null);\r\n \r\n-    return tournamentData.players.map((player: any) => {\r\n-      const totalGames = (player.wins || 0) + (player.draws || 0) + (player.losses || 0);\r\n-      const winRate = totalGames > 0 ? ((player.wins || 0) / totalGames) * 100 : 0;\r\n-      const avgPoints = totalGames > 0 ? (player.points || 0) / totalGames : 0;\r\n+  // Update computed values when tournamentData changes\r\n+  $effect(() => {\r\n+    if (tournamentData?.players && Array.isArray(tournamentData.players)) {\r\n+      playerStats = tournamentData.players.map((player: any) => {\r\n+        const totalGames = (player.wins || 0) + (player.draws || 0) + (player.losses || 0);\r\n+        const winRate = totalGames > 0 ? ((player.wins || 0) / totalGames) * 100 : 0;\r\n+        const avgPoints = totalGames > 0 ? (player.points || 0) / totalGames : 0;\r\n \r\n-      return {\r\n-        ...player,\r\n-        totalGames,\r\n-        winRate: Math.round(winRate * 10) / 10,\r\n-        avgPoints: Math.round(avgPoints * 10) / 10,\r\n-        performance: (player.points || 0) + ((player.wins || 0) * 2) + (player.draws || 0) // Custom performance metric\r\n-      };\r\n-    }).sort((a: any, b: any) => (b.performance || 0) - (a.performance || 0));\r\n+        return {\r\n+          ...player,\r\n+          totalGames,\r\n+          winRate: Math.round(winRate * 10) / 10,\r\n+          avgPoints: Math.round(avgPoints * 10) / 10,\r\n+          performance: (player.points || 0) + ((player.wins || 0) * 2) + (player.draws || 0) // Custom performance metric\r\n+        };\r\n+      }).sort((a: any, b: any) => (b.performance || 0) - (a.performance || 0));\r\n+    } else {\r\n+      playerStats = [];\r\n+    }\r\n   });\r\n \r\n-  let matchStats = $derived(() => {\r\n-    if (!tournamentData) return null;\r\n+  $effect(() => {\r\n+    if (tournamentData) {\r\n+      const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n+      const bracketMatches = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n \r\n-    const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n-    const bracketMatches = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n+      const totalMatches = groupMatches.length + bracketMatches.length;\r\n+      const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n+      const completedBracketMatches = bracketMatches.filter((m: any) => m.winnerId).length;\r\n+      const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n \r\n-    const totalMatches = groupMatches.length + bracketMatches.length;\r\n-    const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n-    const completedBracketMatches = bracketMatches.filter((m: any) => m.winnerId).length;\r\n-    const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n+      // Calculate win/draw/loss distribution\r\n+      let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n \r\n-    // Calculate win/draw/loss distribution\r\n-    let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n+      groupMatches.forEach((match: any) => {\r\n+        if (match.result && typeof match.result === 'object') {\r\n+          Object.values(match.result).forEach((result: any) => {\r\n+            if (result && typeof result === 'object' && result.points === 3) totalWins++;\r\n+            else if (result && typeof result === 'object' && result.points === 1) totalDraws++;\r\n+            else totalLosses++;\r\n+          });\r\n+        }\r\n+      });\r\n \r\n-    groupMatches.forEach((match: any) => {\r\n-      if (match.result && typeof match.result === 'object') {\r\n-        Object.values(match.result).forEach((result: any) => {\r\n-          if (result && typeof result === 'object' && result.points === 3) totalWins++;\r\n-          else if (result && typeof result === 'object' && result.points === 1) totalDraws++;\r\n-          else totalLosses++;\r\n-        });\r\n-      }\r\n-    });\r\n+      bracketMatches.forEach((match: any) => {\r\n+        if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n+      });\r\n \r\n-    bracketMatches.forEach((match: any) => {\r\n-      if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n-    });\r\n-\r\n-    return {\r\n-      totalMatches,\r\n-      completedMatches: totalCompleted,\r\n-      completionRate: totalMatches > 0 ? Math.round((totalCompleted / totalMatches) * 100) : 0,\r\n-      groupMatches: groupMatches.length,\r\n-      bracketMatches: bracketMatches.length,\r\n-      totalWins,\r\n-      totalDraws,\r\n-      totalLosses,\r\n-      avgPointsPerMatch: totalMatches > 0 ? Math.round((totalWins * 3 + totalDraws * 1) / totalMatches * 10) / 10 : 0\r\n-    };\r\n+      matchStats = {\r\n+        totalMatches,\r\n+        completedMatches: totalCompleted,\r\n+        completionRate: totalMatches > 0 ? Math.round((totalCompleted / totalMatches) * 100) : 0,\r\n+        groupMatches: groupMatches.length,\r\n+        bracketMatches: bracketMatches.length,\r\n+        totalWins,\r\n+        totalDraws,\r\n+        totalLosses,\r\n+        avgPointsPerMatch: totalMatches > 0 ? Math.round((totalWins * 3 + totalDraws * 1) / totalMatches * 10) / 10 : 0\r\n+      };\r\n+    } else {\r\n+      matchStats = null;\r\n+    }\r\n   });\r\n \r\n-  let groupStats = $derived(() => {\r\n-    if (!tournamentData?.pods || !Array.isArray(tournamentData.pods) || !tournamentData.players || !Array.isArray(tournamentData.players)) return [];\r\n+  $effect(() => {\r\n+    if (tournamentData?.pods && Array.isArray(tournamentData.pods) && tournamentData.players && Array.isArray(tournamentData.players)) {\r\n+      groupStats = tournamentData.pods.map((pod: any) => {\r\n+        const podMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches.filter((m: any) => m.podId === pod.id) : [];\r\n+        const completedMatches = podMatches.filter((m: any) => m.completed === true).length;\r\n+        const totalPoints = Array.isArray(pod.players) ? pod.players.reduce((sum: number, playerId: string) => {\r\n+          const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n+          return sum + (player?.points || 0);\r\n+        }, 0) : 0;\r\n \r\n-    return tournamentData.pods.map((pod: any) => {\r\n-      const podMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches.filter((m: any) => m.podId === pod.id) : [];\r\n-      const completedMatches = podMatches.filter((m: any) => m.completed === true).length;\r\n-      const totalPoints = Array.isArray(pod.players) ? pod.players.reduce((sum: number, playerId: string) => {\r\n-        const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n-        return sum + (player?.points || 0);\r\n-      }, 0) : 0;\r\n-\r\n-      return {\r\n-        ...pod,\r\n-        totalMatches: podMatches.length,\r\n-        completedMatches,\r\n-        completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n-        totalPoints,\r\n-        avgPoints: Array.isArray(pod.players) && pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n-      };\r\n-    });\r\n+        return {\r\n+          ...pod,\r\n+          totalMatches: podMatches.length,\r\n+          completedMatches,\r\n+          completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n+          totalPoints,\r\n+          avgPoints: Array.isArray(pod.players) && pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n+        };\r\n+      });\r\n+    } else {\r\n+      groupStats = [];\r\n+    }\r\n   });\r\n \r\n-  let tournamentOverview = $derived(() => {\r\n-    if (!tournamentData) return null;\r\n+  $effect(() => {\r\n+    if (tournamentData) {\r\n+      const startTime = new Date(); // Would need to be stored in tournament data\r\n+      const currentTime = new Date();\r\n+      const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n \r\n-    const startTime = new Date(); // Would need to be stored in tournament data\r\n-    const currentTime = new Date();\r\n-    const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n-\r\n-    return {\r\n-      name: tournamentData.name || 'Unknown Tournament',\r\n-      state: tournamentData.state || 'unknown',\r\n-      playerCount: Array.isArray(tournamentData.players) ? tournamentData.players.length : 0,\r\n-      groupCount: Array.isArray(tournamentData.pods) ? tournamentData.pods.length : 0,\r\n-      duration: `${duration} minutes`,\r\n-      isCompleted: tournamentData.state === 'completed'\r\n-    };\r\n+      tournamentOverview = {\r\n+        name: tournamentData.name || 'Unknown Tournament',\r\n+        state: tournamentData.state || 'unknown',\r\n+        playerCount: Array.isArray(tournamentData.players) ? tournamentData.players.length : 0,\r\n+        groupCount: Array.isArray(tournamentData.pods) ? tournamentData.pods.length : 0,\r\n+        duration: `${duration} minutes`,\r\n+        isCompleted: tournamentData.state === 'completed'\r\n+      };\r\n+    } else {\r\n+      tournamentOverview = null;\r\n+    }\r\n   });\r\n \r\n   async function loadTournamentData() {\r\n     try {\r\n"
                },
                {
                    "date": 1764028191892,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -268,8 +268,19 @@\n                  'bg-space-600 text-gray-400'}\">\r\n                 {index + 1}\r\n               </div>\r\n \r\n+              <!-- Player Avatar -->\r\n+              <div class=\"w-10 h-10 rounded-full flex items-center justify-center\">\r\n+                {#if player.profilePhoto}\r\n+                  <img src={player.profilePhoto} alt=\"Profile\" class=\"w-10 h-10 rounded-full object-cover\" />\r\n+                {:else}\r\n+                  <div class=\"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center\">\r\n+                    <svg class=\"w-5 h-5 text-white\" fill=\"currentColor\" viewBox=\"0 0 20 20\"><path fill-rule=\"evenodd\" d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\" clip-rule=\"evenodd\"/></svg>\r\n+                  </div>\r\n+                {/if}\r\n+              </div>\r\n+\r\n               <!-- Player Info -->\r\n               <div class=\"flex-1\">\r\n                 <div class=\"font-bold text-white\">{player.name}</div>\r\n                 <div class=\"text-xs text-gray-400\">\r\n"
                },
                {
                    "date": 1764770292101,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,44 +1,225 @@\n <script lang=\"ts\">\r\n   import { onMount } from 'svelte';\r\n+<<<<<<< HEAD\r\n   import { getState } from '$lib/api';\r\n+=======\r\n+  import { getState, type GameType, GAME_CONFIGS } from '$lib/api';\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n   let { tournamentId } = $props<{ tournamentId: string }>();\r\n \r\n   let tournamentData = $state(null) as any;\r\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n+<<<<<<< HEAD\r\n+=======\r\n+  let gameType = $state<GameType>('cs16');\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n   // Reactive statements to compute statistics\r\n   let playerStats: any[] = $state([]);\r\n   let matchStats: any = $state(null);\r\n   let groupStats: any[] = $state([]);\r\n   let tournamentOverview: any = $state(null);\r\n \r\n+  // Game-specific labels\r\n+  const gameConfig = $derived(GAME_CONFIGS[gameType]);\r\n+  const scoreLabel = $derived(gameConfig?.groupStage.scoreLabel || 'Rounds');\r\n+  const isKillBased = $derived(gameConfig?.groupStage.scoreType === 'kills');\r\n+  const isHealthBased = $derived(gameConfig?.groupStage.scoreType === 'health');\r\n+\r\n+  // Calculate total score (rounds/kills) per player across entire tournament\r\n+  function calculatePlayerScoreStats(players: any[], matches: any[], bracketMatches: any[]) {\r\n+    const scoreStats: Record<string, { scoreWon: number; scoreLost: number; matchesPlayed: number; bestMatch: number; worstMatch: number; mapsWon: number }> = {};\r\n+    \r\n+    // Initialize stats for all players\r\n+    players.forEach((p: any) => {\r\n+      scoreStats[p.id] = { scoreWon: 0, scoreLost: 0, matchesPlayed: 0, bestMatch: 0, worstMatch: Infinity, mapsWon: 0 };\r\n+    });\r\n+\r\n+    // Group stage matches\r\n+    matches.forEach((match: any) => {\r\n+      if (!match.result || !match.completed) return;\r\n+      \r\n+      const p1Id = match.player1Id;\r\n+      const p2Id = match.player2Id;\r\n+      const p1Result = match.result[p1Id];\r\n+      const p2Result = match.result[p2Id];\r\n+      \r\n+      // Always count the match as played\r\n+      if (scoreStats[p1Id]) scoreStats[p1Id].matchesPlayed++;\r\n+      if (scoreStats[p2Id]) scoreStats[p2Id].matchesPlayed++;\r\n+      \r\n+      // Track scores if available\r\n+      if (p1Result?.score !== undefined && p2Result?.score !== undefined) {\r\n+        // Track for player 1\r\n+        if (scoreStats[p1Id]) {\r\n+          scoreStats[p1Id].scoreWon += p1Result.score;\r\n+          scoreStats[p1Id].scoreLost += p2Result.score;\r\n+          scoreStats[p1Id].bestMatch = Math.max(scoreStats[p1Id].bestMatch, p1Result.score);\r\n+          scoreStats[p1Id].worstMatch = Math.min(scoreStats[p1Id].worstMatch, p1Result.score);\r\n+          // Track map/match wins\r\n+          if (p1Result.score > p2Result.score) scoreStats[p1Id].mapsWon++;\r\n+        }\r\n+        \r\n+        // Track for player 2\r\n+        if (scoreStats[p2Id]) {\r\n+          scoreStats[p2Id].scoreWon += p2Result.score;\r\n+          scoreStats[p2Id].scoreLost += p1Result.score;\r\n+          scoreStats[p2Id].bestMatch = Math.max(scoreStats[p2Id].bestMatch, p2Result.score);\r\n+          scoreStats[p2Id].worstMatch = Math.min(scoreStats[p2Id].worstMatch, p2Result.score);\r\n+          // Track map/match wins\r\n+          if (p2Result.score > p1Result.score) scoreStats[p2Id].mapsWon++;\r\n+        }\r\n+      }\r\n+    });\r\n+\r\n+    // Bracket matches (BO3 - each MAP counts as a match, not each series)\r\n+    bracketMatches.forEach((match: any) => {\r\n+      if (!match.winnerId) return;\r\n+      \r\n+      const p1Id = match.player1Id;\r\n+      const p2Id = match.player2Id;\r\n+      \r\n+      // Count each map/game as a separate match\r\n+      if (match.games && Array.isArray(match.games)) {\r\n+        match.games.forEach((game: any) => {\r\n+          if (game.player1Score !== undefined && game.player2Score !== undefined) {\r\n+            // Only count maps that were actually played\r\n+            if (game.player1Score === 0 && game.player2Score === 0) return;\r\n+            \r\n+            // Each map is a match\r\n+            if (scoreStats[p1Id]) {\r\n+              scoreStats[p1Id].scoreWon += game.player1Score;\r\n+              scoreStats[p1Id].scoreLost += game.player2Score;\r\n+              scoreStats[p1Id].matchesPlayed++;\r\n+              scoreStats[p1Id].bestMatch = Math.max(scoreStats[p1Id].bestMatch, game.player1Score);\r\n+              scoreStats[p1Id].worstMatch = Math.min(scoreStats[p1Id].worstMatch, game.player1Score);\r\n+              // Track map wins\r\n+              if (game.player1Score > game.player2Score) scoreStats[p1Id].mapsWon++;\r\n+            }\r\n+            if (scoreStats[p2Id]) {\r\n+              scoreStats[p2Id].scoreWon += game.player2Score;\r\n+              scoreStats[p2Id].scoreLost += game.player1Score;\r\n+              scoreStats[p2Id].matchesPlayed++;\r\n+              scoreStats[p2Id].bestMatch = Math.max(scoreStats[p2Id].bestMatch, game.player2Score);\r\n+              scoreStats[p2Id].worstMatch = Math.min(scoreStats[p2Id].worstMatch, game.player2Score);\r\n+              // Track map wins\r\n+              if (game.player2Score > game.player1Score) scoreStats[p2Id].mapsWon++;\r\n+            }\r\n+          }\r\n+        });\r\n+      } else {\r\n+        // Fallback: if no games array, count series as 2 maps (minimum for BO3 winner)\r\n+        // This is an estimate for legacy data without detailed map scores\r\n+        if (scoreStats[p1Id]) scoreStats[p1Id].matchesPlayed += 2;\r\n+        if (scoreStats[p2Id]) scoreStats[p2Id].matchesPlayed += 2;\r\n+      }\r\n+    });\r\n+\r\n+    // Clean up worstMatch for players with no matches\r\n+    Object.values(scoreStats).forEach(stats => {\r\n+      if (stats.worstMatch === Infinity) stats.worstMatch = 0;\r\n+    });\r\n+\r\n+    return scoreStats;\r\n+  }\r\n+\r\n+  // Determine final tournament placement for a player\r\n+  function getTournamentPlacement(playerId: string, bracketMatches: any[]): number {\r\n+    // Check if player is champion (winner of finals)\r\n+    const finals = bracketMatches.find((m: any) => m.bracketType === 'finals');\r\n+    if (finals?.winnerId === playerId) return 1;\r\n+    \r\n+    // Check if player is runner-up (loser of finals)\r\n+    if (finals?.winnerId && (finals.player1Id === playerId || finals.player2Id === playerId)) {\r\n+      return 2;\r\n+    }\r\n+    \r\n+    // Check if player won 3rd place match\r\n+    const thirdPlace = bracketMatches.find((m: any) => m.bracketType === '3rd-place');\r\n+    if (thirdPlace?.winnerId === playerId) return 3;\r\n+    \r\n+    // Check if player lost 3rd place match (4th place)\r\n+    if (thirdPlace?.winnerId && (thirdPlace.player1Id === playerId || thirdPlace.player2Id === playerId)) {\r\n+      return 4;\r\n+    }\r\n+    \r\n+    // Check semifinals losers (5th-6th)\r\n+    const semis = bracketMatches.filter((m: any) => m.bracketType === 'semifinals');\r\n+    for (const semi of semis) {\r\n+      if (semi.winnerId && (semi.player1Id === playerId || semi.player2Id === playerId) && semi.winnerId !== playerId) {\r\n+        return 5;\r\n+      }\r\n+    }\r\n+    \r\n+    // Check quarterfinals losers (7th-8th)\r\n+    const quarters = bracketMatches.filter((m: any) => m.bracketType === 'quarterfinals');\r\n+    for (const quarter of quarters) {\r\n+      if (quarter.winnerId && (quarter.player1Id === playerId || quarter.player2Id === playerId) && quarter.winnerId !== playerId) {\r\n+        return 7;\r\n+      }\r\n+    }\r\n+    \r\n+    // Player didn't make playoffs - use group stage rank (high number)\r\n+    return 100;\r\n+  }\r\n+\r\n   // Update computed values when tournamentData changes\r\n   $effect(() => {\r\n     if (tournamentData?.players && Array.isArray(tournamentData.players)) {\r\n+      // Set gameType from tournament data\r\n+      gameType = tournamentData.gameType || 'cs16';\r\n+      \r\n+      const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n+      const bracketMatchesArr = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n+      const scoreStats = calculatePlayerScoreStats(tournamentData.players, groupMatches, bracketMatchesArr);\r\n+\r\n       playerStats = tournamentData.players.map((player: any) => {\r\n-        const totalGames = (player.wins || 0) + (player.draws || 0) + (player.losses || 0);\r\n-        const winRate = totalGames > 0 ? ((player.wins || 0) / totalGames) * 100 : 0;\r\n-        const avgPoints = totalGames > 0 ? (player.points || 0) / totalGames : 0;\r\n+        const stats = scoreStats[player.id] || { scoreWon: 0, scoreLost: 0, matchesPlayed: 0, bestMatch: 0, worstMatch: 0, mapsWon: 0 };\r\n+        const totalScore = stats.scoreWon + stats.scoreLost;\r\n+        const scoreWinRate = totalScore > 0 ? (stats.scoreWon / totalScore) * 100 : 0;\r\n+        const avgScorePerMatch = stats.matchesPlayed > 0 ? stats.scoreWon / stats.matchesPlayed : 0;\r\n+        // For health-based games: average HP per win (only count wins, not all matches)\r\n+        const avgScorePerWin = stats.mapsWon > 0 ? stats.scoreWon / stats.mapsWon : 0;\r\n+        const scoreDiff = stats.scoreWon - stats.scoreLost;\r\n+        const placement = getTournamentPlacement(player.id, bracketMatchesArr);\r\n+        // For health-based games: calculate actual match win rate\r\n+        const matchWinRate = stats.matchesPlayed > 0 ? (stats.mapsWon / stats.matchesPlayed) * 100 : 0;\r\n \r\n         return {\r\n           ...player,\r\n-          totalGames,\r\n-          winRate: Math.round(winRate * 10) / 10,\r\n-          avgPoints: Math.round(avgPoints * 10) / 10,\r\n-          performance: (player.points || 0) + ((player.wins || 0) * 2) + (player.draws || 0) // Custom performance metric\r\n+          scoreWon: stats.scoreWon,\r\n+          scoreLost: stats.scoreLost,\r\n+          scoreDiff,\r\n+          matchesPlayed: stats.matchesPlayed,\r\n+          scoreWinRate: Math.round(scoreWinRate * 10) / 10,\r\n+          matchWinRate: Math.round(matchWinRate * 10) / 10,\r\n+          avgScorePerMatch: Math.round(avgScorePerMatch * 10) / 10,\r\n+          avgScorePerWin: Math.round(avgScorePerWin * 10) / 10,\r\n+          bestMatch: stats.bestMatch,\r\n+          worstMatch: stats.worstMatch,\r\n+          mapsWon: stats.mapsWon,\r\n+          placement\r\n         };\r\n-      }).sort((a: any, b: any) => (b.performance || 0) - (a.performance || 0));\r\n+      }).sort((a: any, b: any) => {\r\n+        // Primary: Tournament placement (1st, 2nd, 3rd, etc.)\r\n+        if (a.placement !== b.placement) return a.placement - b.placement;\r\n+        // Secondary: Points (group stage ranking)\r\n+        if (b.points !== a.points) return b.points - a.points;\r\n+        // Tertiary: Score won\r\n+        return b.scoreWon - a.scoreWon;\r\n+      });\r\n     } else {\r\n       playerStats = [];\r\n     }\r\n   });\r\n \r\n   $effect(() => {\r\n     if (tournamentData) {\r\n       const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n+<<<<<<< HEAD\r\n       const bracketMatches = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n \r\n       const totalMatches = groupMatches.length + bracketMatches.length;\r\n       const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n@@ -59,20 +240,83 @@\n       });\r\n \r\n       bracketMatches.forEach((match: any) => {\r\n         if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n+=======\r\n+      const bracketMatchesArr = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n+\r\n+      // Count actual maps played in brackets (not just series count)\r\n+      let bracketMapsPlayed = 0;\r\n+      let completedBracketMaps = 0;\r\n+      bracketMatchesArr.forEach((match: any) => {\r\n+        if (match.games && Array.isArray(match.games) && match.games.length > 0) {\r\n+          // Count maps that were actually played (non-zero scores)\r\n+          const playedGames = match.games.filter((g: any) => g.player1Score > 0 || g.player2Score > 0);\r\n+          bracketMapsPlayed += playedGames.length;\r\n+          if (match.winnerId) {\r\n+            completedBracketMaps += playedGames.length;\r\n+          }\r\n+        } else if (match.winnerId) {\r\n+          // Fallback: legacy data without games array - estimate 2 maps per completed series\r\n+          bracketMapsPlayed += 2;\r\n+          completedBracketMaps += 2;\r\n+        }\r\n       });\r\n \r\n+      const totalMatches = groupMatches.length + bracketMapsPlayed;\r\n+      const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n+      const totalCompleted = completedGroupMatches + completedBracketMaps;\r\n+\r\n+      // Calculate total score (rounds/kills) played in tournament\r\n+      let totalScorePlayed = 0;\r\n+      let highestScore = 0;\r\n+      let closestMatch = { diff: Infinity, score: '' };\r\n+\r\n+      groupMatches.forEach((match: any) => {\r\n+        if (match.result && match.completed) {\r\n+          const scores = Object.values(match.result).map((r: any) => r?.score || 0);\r\n+          if (scores.length === 2) {\r\n+            totalScorePlayed += scores[0] + scores[1];\r\n+            highestScore = Math.max(highestScore, ...scores);\r\n+            const diff = Math.abs(scores[0] - scores[1]);\r\n+            if (diff < closestMatch.diff && diff > 0) {\r\n+              closestMatch = { diff, score: `${Math.max(...scores)}-${Math.min(...scores)}` };\r\n+            }\r\n+          }\r\n+        }\r\n+      });\r\n+\r\n+      bracketMatchesArr.forEach((match: any) => {\r\n+        if (match.winnerId && match.games) {\r\n+          match.games.forEach((game: any) => {\r\n+            if (game.player1Score || game.player2Score) {\r\n+              totalScorePlayed += (game.player1Score || 0) + (game.player2Score || 0);\r\n+              highestScore = Math.max(highestScore, game.player1Score || 0, game.player2Score || 0);\r\n+            }\r\n+          });\r\n+        }\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n+      });\r\n+\r\n       matchStats = {\r\n         totalMatches,\r\n         completedMatches: totalCompleted,\r\n         completionRate: totalMatches > 0 ? Math.round((totalCompleted / totalMatches) * 100) : 0,\r\n         groupMatches: groupMatches.length,\r\n+<<<<<<< HEAD\r\n         bracketMatches: bracketMatches.length,\r\n         totalWins,\r\n         totalDraws,\r\n         totalLosses,\r\n         avgPointsPerMatch: totalMatches > 0 ? Math.round((totalWins * 3 + totalDraws * 1) / totalMatches * 10) / 10 : 0\r\n+=======\r\n+        bracketMatches: bracketMapsPlayed,\r\n+        bracketSeries: bracketMatchesArr.length,\r\n+        totalScorePlayed,\r\n+        avgScorePerMatch: totalCompleted > 0 ? Math.round(totalScorePlayed / totalCompleted * 10) / 10 : 0,\r\n+        highestScore,\r\n+        closestMatch: closestMatch.diff < Infinity ? closestMatch.score : 'N/A'\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       };\r\n     } else {\r\n       matchStats = null;\r\n     }\r\n@@ -82,20 +326,38 @@\n     if (tournamentData?.pods && Array.isArray(tournamentData.pods) && tournamentData.players && Array.isArray(tournamentData.players)) {\r\n       groupStats = tournamentData.pods.map((pod: any) => {\r\n         const podMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches.filter((m: any) => m.podId === pod.id) : [];\r\n         const completedMatches = podMatches.filter((m: any) => m.completed === true).length;\r\n+<<<<<<< HEAD\r\n         const totalPoints = Array.isArray(pod.players) ? pod.players.reduce((sum: number, playerId: string) => {\r\n           const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n           return sum + (player?.points || 0);\r\n         }, 0) : 0;\r\n+=======\r\n+        \r\n+        // Calculate total score (rounds/kills) in this group\r\n+        let totalScore = 0;\r\n+        podMatches.forEach((match: any) => {\r\n+          if (match.result && match.completed) {\r\n+            Object.values(match.result).forEach((r: any) => {\r\n+              totalScore += r?.score || 0;\r\n+            });\r\n+          }\r\n+        });\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n         return {\r\n           ...pod,\r\n           totalMatches: podMatches.length,\r\n           completedMatches,\r\n           completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n+<<<<<<< HEAD\r\n           totalPoints,\r\n           avgPoints: Array.isArray(pod.players) && pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n+=======\r\n+          totalScore,\r\n+          avgScorePerMatch: completedMatches > 0 ? Math.round(totalScore / completedMatches * 10) / 10 : 0\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         };\r\n       });\r\n     } else {\r\n       groupStats = [];\r\n@@ -103,18 +365,25 @@\n   });\r\n \r\n   $effect(() => {\r\n     if (tournamentData) {\r\n+<<<<<<< HEAD\r\n       const startTime = new Date(); // Would need to be stored in tournament data\r\n       const currentTime = new Date();\r\n       const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n \r\n+=======\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       tournamentOverview = {\r\n         name: tournamentData.name || 'Unknown Tournament',\r\n         state: tournamentData.state || 'unknown',\r\n         playerCount: Array.isArray(tournamentData.players) ? tournamentData.players.length : 0,\r\n         groupCount: Array.isArray(tournamentData.pods) ? tournamentData.pods.length : 0,\r\n+<<<<<<< HEAD\r\n         duration: `${duration} minutes`,\r\n+=======\r\n+        gameType: tournamentData.gameType || 'cs16',\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         isCompleted: tournamentData.state === 'completed'\r\n       };\r\n     } else {\r\n       tournamentOverview = null;\r\n@@ -133,8 +402,32 @@\n       loading = false;\r\n     }\r\n   }\r\n \r\n+<<<<<<< HEAD\r\n+=======\r\n+  // Export tournament data as JSON file\r\n+  function exportTournamentData() {\r\n+    if (!tournamentData) return;\r\n+    \r\n+    const exportData = {\r\n+      exportedAt: new Date().toISOString(),\r\n+      tournamentId,\r\n+      ...tournamentData\r\n+    };\r\n+    \r\n+    const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });\r\n+    const url = URL.createObjectURL(blob);\r\n+    const a = document.createElement('a');\r\n+    a.href = url;\r\n+    a.download = `tournament-${tournamentData.name?.replace(/[^a-z0-9]/gi, '-') || tournamentId}-${new Date().toISOString().split('T')[0]}.json`;\r\n+    document.body.appendChild(a);\r\n+    a.click();\r\n+    document.body.removeChild(a);\r\n+    URL.revokeObjectURL(url);\r\n+  }\r\n+\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n   onMount(loadTournamentData);\r\n </script>\r\n \r\n <div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 text-gaming-text px-3 py-3\">\r\n@@ -153,8 +446,24 @@\n           </svg>\r\n           TOURNAMENT STATISTICS\r\n         </h1>\r\n       </div>\r\n+<<<<<<< HEAD\r\n+=======\r\n+      \r\n+      <!-- Export Button -->\r\n+      {#if tournamentData}\r\n+        <button\r\n+          onclick={exportTournamentData}\r\n+          class=\"flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-cyber-green to-brand-cyan text-space-900 font-bold rounded-lg hover:opacity-90 transition-opacity shadow-lg\"\r\n+        >\r\n+          <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"/>\r\n+          </svg>\r\n+          Export JSON\r\n+        </button>\r\n+      {/if}\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n     </div>\r\n \r\n     {#if loading}\r\n       <div class=\"flex justify-center items-center py-20\">\r\n@@ -206,9 +515,13 @@\n \r\n           <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-cyber-green\">{stats.totalMatches}</div>\r\n+<<<<<<< HEAD\r\n               <div class=\"text-xs text-gray-400\">Total Matches</div>\r\n+=======\r\n+              <div class=\"text-xs text-gray-400\">Total Maps</div>\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n             </div>\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-cyber-blue\">{stats.completedMatches}</div>\r\n               <div class=\"text-xs text-gray-400\">Completed</div>\r\n@@ -218,8 +531,9 @@\n               <div class=\"text-xs text-gray-400\">Group Stage</div>\r\n             </div>\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-yellow-400\">{stats.bracketMatches}</div>\r\n+<<<<<<< HEAD\r\n               <div class=\"text-xs text-gray-400\">Playoffs</div>\r\n             </div>\r\n           </div>\r\n \r\n@@ -248,30 +562,76 @@\n         </div>\r\n       {/if}\r\n \r\n       <!-- Player Performance Rankings -->\r\n+=======\r\n+              <div class=\"text-xs text-gray-400\">Playoff Maps</div>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Score Statistics (Rounds/Kills/HP based on game) -->\r\n+          <div class=\"mb-4\">\r\n+            <h3 class=\"text-sm font-bold text-gray-300 mb-2\">{isHealthBased ? 'Health' : isKillBased ? 'Kill' : 'Round'} Statistics</h3>\r\n+            <div class=\"flex gap-2\">\r\n+              <div class=\"flex-1 bg-cyan-900/30 rounded p-3 text-center\">\r\n+                <div class=\"text-2xl font-black text-cyan-400\">{stats.totalScorePlayed}</div>\r\n+                <div class=\"text-xs text-gray-400\">Total {isHealthBased ? 'HP' : isKillBased ? 'Kills' : 'Rounds'}</div>\r\n+              </div>\r\n+              <div class=\"flex-1 bg-purple-900/30 rounded p-3 text-center\">\r\n+                <div class=\"text-2xl font-black text-purple-400\">{stats.avgScorePerMatch}</div>\r\n+                <div class=\"text-xs text-gray-400\">Avg/Match</div>\r\n+              </div>\r\n+              <div class=\"flex-1 bg-orange-900/30 rounded p-3 text-center\">\r\n+                <div class=\"text-2xl font-black text-orange-400\">{stats.highestScore}</div>\r\n+                <div class=\"text-xs text-gray-400\">Best Score</div>\r\n+              </div>\r\n+              <div class=\"flex-1 bg-green-900/30 rounded p-3 text-center\">\r\n+                <div class=\"text-2xl font-black text-green-400\">{stats.closestMatch}</div>\r\n+                <div class=\"text-xs text-gray-400\">Closest</div>\r\n+              </div>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      {/if}\r\n+\r\n+      <!-- Player Performance Rankings (CS-Focused: Rounds Won) -->\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       <div class=\"glass rounded-lg p-6 mb-6\">\r\n         <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n           <svg class=\"w-5 h-5 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/>\r\n           </svg>\r\n+<<<<<<< HEAD\r\n           Player Performance Rankings\r\n+=======\r\n+          Final Tournament Rankings\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         </h2>\r\n \r\n         <div class=\"space-y-2\">\r\n           {#each playerStats as player, index}\r\n+<<<<<<< HEAD\r\n             <div class=\"flex items-center gap-4 p-3 rounded-lg bg-space-700/50 hover:bg-space-700 transition-colors\">\r\n               <!-- Rank -->\r\n               <div class=\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\r\n+=======\r\n+            <div class=\"flex items-center gap-3 p-3 rounded-lg bg-space-700/50 hover:bg-space-700 transition-colors\">\r\n+              <!-- Rank -->\r\n+              <div class=\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {index === 0 ? 'bg-gradient-to-br from-yellow-400 to-yellow-600 text-space-900' :\r\n                  index === 1 ? 'bg-gradient-to-br from-gray-300 to-gray-500 text-space-900' :\r\n                  index === 2 ? 'bg-gradient-to-br from-orange-400 to-orange-600 text-space-900' :\r\n                  'bg-space-600 text-gray-400'}\">\r\n                 {index + 1}\r\n               </div>\r\n \r\n               <!-- Player Avatar -->\r\n+<<<<<<< HEAD\r\n               <div class=\"w-10 h-10 rounded-full flex items-center justify-center\">\r\n+=======\r\n+              <div class=\"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if player.profilePhoto}\r\n                   <img src={player.profilePhoto} alt=\"Profile\" class=\"w-10 h-10 rounded-full object-cover\" />\r\n                 {:else}\r\n                   <div class=\"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center\">\r\n@@ -280,8 +640,9 @@\n                 {/if}\r\n               </div>\r\n \r\n               <!-- Player Info -->\r\n+<<<<<<< HEAD\r\n               <div class=\"flex-1\">\r\n                 <div class=\"font-bold text-white\">{player.name}</div>\r\n                 <div class=\"text-xs text-gray-400\">\r\n                   {player.totalGames} games • {player.wins}W {player.draws}D {player.losses}L\r\n@@ -302,8 +663,52 @@\n               <div class=\"text-right\">\r\n                 <div class=\"text-lg font-black text-cyber-pink\">{player.avgPoints}</div>\r\n                 <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n               </div>\r\n+=======\r\n+              <div class=\"flex-1 min-w-0\">\r\n+                <div class=\"font-bold text-white truncate\">{player.name}</div>\r\n+                <div class=\"text-xs text-gray-400\">\r\n+                  {player.matchesPlayed} matches • Best: {player.bestMatch}\r\n+                </div>\r\n+              </div>\r\n+\r\n+              <!-- Score Won (Primary Stat - Kills/Rounds/HP based on game) -->\r\n+              <div class=\"text-center px-2\">\r\n+                <div class=\"text-xl font-black text-cyan-400\">{player.scoreWon}</div>\r\n+                <div class=\"text-xs text-gray-400\">{isHealthBased ? 'Total HP' : isKillBased ? 'Total Kills' : 'Rounds Won'}</div>\r\n+              </div>\r\n+\r\n+              <!-- Score Difference (K/D for kills, +/- for rounds) - Hidden for health-based games -->\r\n+              {#if !isHealthBased}\r\n+              <div class=\"text-center px-2\">\r\n+                <div class=\"text-lg font-bold {player.scoreDiff > 0 ? 'text-green-400' : player.scoreDiff < 0 ? 'text-red-400' : 'text-gray-400'}\">\r\n+                  {player.scoreDiff > 0 ? '+' : ''}{player.scoreDiff}\r\n+                </div>\r\n+                <div class=\"text-xs text-gray-400\">{isKillBased ? 'K/D Diff' : '+/- Rounds'}</div>\r\n+              </div>\r\n+              {/if}\r\n+\r\n+              <!-- Win Rate -->\r\n+              <div class=\"text-center px-2\">\r\n+                <div class=\"text-lg font-bold text-purple-400\">{isHealthBased ? player.matchWinRate : player.scoreWinRate}%</div>\r\n+                <div class=\"text-xs text-gray-400\">{isHealthBased ? 'Win Rate' : isKillBased ? 'K/D %' : 'Win %'}</div>\r\n+              </div>\r\n+\r\n+              <!-- Avg Score/Match (Avg HP per Win for Worms) -->\r\n+              <div class=\"text-center px-2\">\r\n+                <div class=\"text-lg font-bold text-orange-400\">{isHealthBased ? player.avgScorePerWin : player.avgScorePerMatch}</div>\r\n+                <div class=\"text-xs text-gray-400\">{isHealthBased ? 'Avg HP/Win' : 'Avg/Match'}</div>\r\n+              </div>\r\n+              \r\n+              <!-- Maps/Rounds Won (important for UT2004 and Worms) -->\r\n+              {#if isKillBased || isHealthBased}\r\n+              <div class=\"text-center px-2\">\r\n+                <div class=\"text-lg font-bold text-yellow-400\">{player.mapsWon}</div>\r\n+                <div class=\"text-xs text-gray-400\">{isHealthBased ? 'Rounds Won' : 'Maps Won'}</div>\r\n+              </div>\r\n+              {/if}\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n             </div>\r\n           {/each}\r\n         </div>\r\n       </div>\r\n@@ -314,9 +719,13 @@\n           <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n             <svg class=\"w-5 h-5 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n               <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"/>\r\n             </svg>\r\n+<<<<<<< HEAD\r\n             Group Performance\r\n+=======\r\n+            Group Performance ({isHealthBased ? 'HP' : isKillBased ? 'Kills' : 'Rounds'})\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n           </h2>\r\n \r\n           <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n             {#each groupStats as group}\r\n@@ -331,15 +740,24 @@\n                     <div class=\"text-lg font-bold text-cyber-green\">{group.totalMatches}</div>\r\n                     <div class=\"text-xs text-gray-400\">Matches</div>\r\n                   </div>\r\n                   <div>\r\n+<<<<<<< HEAD\r\n                     <div class=\"text-lg font-bold text-cyber-blue\">{group.completedMatches}</div>\r\n                     <div class=\"text-xs text-gray-400\">Completed</div>\r\n                   </div>\r\n                   <div>\r\n                     <div class=\"text-lg font-bold text-cyber-pink\">{group.avgPoints}</div>\r\n                     <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n+=======\r\n+                    <div class=\"text-lg font-bold text-cyan-400\">{group.totalScore}</div>\r\n+                    <div class=\"text-xs text-gray-400\">{isHealthBased ? 'HP' : isKillBased ? 'Kills' : 'Rounds'}</div>\r\n                   </div>\r\n+                  <div>\r\n+                    <div class=\"text-lg font-bold text-purple-400\">{group.avgScorePerMatch}</div>\r\n+                    <div class=\"text-xs text-gray-400\">Avg/Match</div>\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n+                  </div>\r\n                 </div>\r\n \r\n                 <!-- Progress Bar -->\r\n                 <div class=\"mt-3\">\r\n@@ -391,9 +809,13 @@\n                 'bg-cyber-blue' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n             <div class=\"flex-1\">\r\n               <div class=\"font-bold text-white\">Group Stage</div>\r\n               <div class=\"text-sm text-gray-400\">\r\n+<<<<<<< HEAD\r\n                 {tournamentData.matches?.filter(m => m.completed).length || 0} of {tournamentData.matches?.length || 0} matches completed\r\n+=======\r\n+                {tournamentData.matches?.filter((m: any) => m.completed).length || 0} of {tournamentData.matches?.length || 0} matches completed\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if tournamentData.state === 'group'}\r\n                   <span class=\"text-cyber-blue font-bold\">(Current Phase)</span>\r\n                 {/if}\r\n               </div>\r\n@@ -407,9 +829,13 @@\n                 'bg-cyber-pink' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n             <div class=\"flex-1\">\r\n               <div class=\"font-bold text-white\">Playoffs</div>\r\n               <div class=\"text-sm text-gray-400\">\r\n+<<<<<<< HEAD\r\n                 {tournamentData.bracketMatches?.filter(m => m.winnerId).length || 0} of {tournamentData.bracketMatches?.length || 0} matches completed\r\n+=======\r\n+                {tournamentData.bracketMatches?.filter((m: any) => m.winnerId).length || 0} of {tournamentData.bracketMatches?.length || 0} matches completed\r\n+>>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if tournamentData.state === 'playoffs'}\r\n                   <span class=\"text-cyber-pink font-bold\">(Current Phase)</span>\r\n                 {/if}\r\n               </div>\r\n"
                },
                {
                    "date": 1764770385185,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,21 +1,14 @@\n <script lang=\"ts\">\r\n   import { onMount } from 'svelte';\r\n-<<<<<<< HEAD\r\n-  import { getState } from '$lib/api';\r\n-=======\r\n   import { getState, type GameType, GAME_CONFIGS } from '$lib/api';\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n   let { tournamentId } = $props<{ tournamentId: string }>();\r\n \r\n   let tournamentData = $state(null) as any;\r\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n-<<<<<<< HEAD\r\n-=======\r\n   let gameType = $state<GameType>('cs16');\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n   // Reactive statements to compute statistics\r\n   let playerStats: any[] = $state([]);\r\n   let matchStats: any = $state(null);\r\n@@ -217,32 +210,8 @@\n \r\n   $effect(() => {\r\n     if (tournamentData) {\r\n       const groupMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches : [];\r\n-<<<<<<< HEAD\r\n-      const bracketMatches = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n-\r\n-      const totalMatches = groupMatches.length + bracketMatches.length;\r\n-      const completedGroupMatches = groupMatches.filter((m: any) => m.completed === true).length;\r\n-      const completedBracketMatches = bracketMatches.filter((m: any) => m.winnerId).length;\r\n-      const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n-\r\n-      // Calculate win/draw/loss distribution\r\n-      let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n-\r\n-      groupMatches.forEach((match: any) => {\r\n-        if (match.result && typeof match.result === 'object') {\r\n-          Object.values(match.result).forEach((result: any) => {\r\n-            if (result && typeof result === 'object' && result.points === 3) totalWins++;\r\n-            else if (result && typeof result === 'object' && result.points === 1) totalDraws++;\r\n-            else totalLosses++;\r\n-          });\r\n-        }\r\n-      });\r\n-\r\n-      bracketMatches.forEach((match: any) => {\r\n-        if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n-=======\r\n       const bracketMatchesArr = Array.isArray(tournamentData.bracketMatches) ? tournamentData.bracketMatches : [];\r\n \r\n       // Count actual maps played in brackets (not just series count)\r\n       let bracketMapsPlayed = 0;\r\n@@ -293,30 +262,21 @@\n               highestScore = Math.max(highestScore, game.player1Score || 0, game.player2Score || 0);\r\n             }\r\n           });\r\n         }\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       });\r\n \r\n       matchStats = {\r\n         totalMatches,\r\n         completedMatches: totalCompleted,\r\n         completionRate: totalMatches > 0 ? Math.round((totalCompleted / totalMatches) * 100) : 0,\r\n         groupMatches: groupMatches.length,\r\n-<<<<<<< HEAD\r\n-        bracketMatches: bracketMatches.length,\r\n-        totalWins,\r\n-        totalDraws,\r\n-        totalLosses,\r\n-        avgPointsPerMatch: totalMatches > 0 ? Math.round((totalWins * 3 + totalDraws * 1) / totalMatches * 10) / 10 : 0\r\n-=======\r\n         bracketMatches: bracketMapsPlayed,\r\n         bracketSeries: bracketMatchesArr.length,\r\n         totalScorePlayed,\r\n         avgScorePerMatch: totalCompleted > 0 ? Math.round(totalScorePlayed / totalCompleted * 10) / 10 : 0,\r\n         highestScore,\r\n         closestMatch: closestMatch.diff < Infinity ? closestMatch.score : 'N/A'\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       };\r\n     } else {\r\n       matchStats = null;\r\n     }\r\n@@ -326,14 +286,8 @@\n     if (tournamentData?.pods && Array.isArray(tournamentData.pods) && tournamentData.players && Array.isArray(tournamentData.players)) {\r\n       groupStats = tournamentData.pods.map((pod: any) => {\r\n         const podMatches = Array.isArray(tournamentData.matches) ? tournamentData.matches.filter((m: any) => m.podId === pod.id) : [];\r\n         const completedMatches = podMatches.filter((m: any) => m.completed === true).length;\r\n-<<<<<<< HEAD\r\n-        const totalPoints = Array.isArray(pod.players) ? pod.players.reduce((sum: number, playerId: string) => {\r\n-          const player = tournamentData.players.find((p: any) => p.id === playerId);\r\n-          return sum + (player?.points || 0);\r\n-        }, 0) : 0;\r\n-=======\r\n         \r\n         // Calculate total score (rounds/kills) in this group\r\n         let totalScore = 0;\r\n         podMatches.forEach((match: any) => {\r\n@@ -342,22 +296,16 @@\n               totalScore += r?.score || 0;\r\n             });\r\n           }\r\n         });\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n \r\n         return {\r\n           ...pod,\r\n           totalMatches: podMatches.length,\r\n           completedMatches,\r\n           completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n-<<<<<<< HEAD\r\n-          totalPoints,\r\n-          avgPoints: Array.isArray(pod.players) && pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n-=======\r\n           totalScore,\r\n           avgScorePerMatch: completedMatches > 0 ? Math.round(totalScore / completedMatches * 10) / 10 : 0\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         };\r\n       });\r\n     } else {\r\n       groupStats = [];\r\n@@ -365,25 +313,14 @@\n   });\r\n \r\n   $effect(() => {\r\n     if (tournamentData) {\r\n-<<<<<<< HEAD\r\n-      const startTime = new Date(); // Would need to be stored in tournament data\r\n-      const currentTime = new Date();\r\n-      const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n-\r\n-=======\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       tournamentOverview = {\r\n         name: tournamentData.name || 'Unknown Tournament',\r\n         state: tournamentData.state || 'unknown',\r\n         playerCount: Array.isArray(tournamentData.players) ? tournamentData.players.length : 0,\r\n         groupCount: Array.isArray(tournamentData.pods) ? tournamentData.pods.length : 0,\r\n-<<<<<<< HEAD\r\n-        duration: `${duration} minutes`,\r\n-=======\r\n         gameType: tournamentData.gameType || 'cs16',\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         isCompleted: tournamentData.state === 'completed'\r\n       };\r\n     } else {\r\n       tournamentOverview = null;\r\n@@ -402,10 +339,8 @@\n       loading = false;\r\n     }\r\n   }\r\n \r\n-<<<<<<< HEAD\r\n-=======\r\n   // Export tournament data as JSON file\r\n   function exportTournamentData() {\r\n     if (!tournamentData) return;\r\n     \r\n@@ -425,9 +360,8 @@\n     document.body.removeChild(a);\r\n     URL.revokeObjectURL(url);\r\n   }\r\n \r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n   onMount(loadTournamentData);\r\n </script>\r\n \r\n <div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 text-gaming-text px-3 py-3\">\r\n@@ -446,10 +380,8 @@\n           </svg>\r\n           TOURNAMENT STATISTICS\r\n         </h1>\r\n       </div>\r\n-<<<<<<< HEAD\r\n-=======\r\n       \r\n       <!-- Export Button -->\r\n       {#if tournamentData}\r\n         <button\r\n@@ -461,9 +393,8 @@\n           </svg>\r\n           Export JSON\r\n         </button>\r\n       {/if}\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n     </div>\r\n \r\n     {#if loading}\r\n       <div class=\"flex justify-center items-center py-20\">\r\n@@ -515,13 +446,9 @@\n \r\n           <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-cyber-green\">{stats.totalMatches}</div>\r\n-<<<<<<< HEAD\r\n-              <div class=\"text-xs text-gray-400\">Total Matches</div>\r\n-=======\r\n               <div class=\"text-xs text-gray-400\">Total Maps</div>\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n             </div>\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-cyber-blue\">{stats.completedMatches}</div>\r\n               <div class=\"text-xs text-gray-400\">Completed</div>\r\n@@ -531,40 +458,8 @@\n               <div class=\"text-xs text-gray-400\">Group Stage</div>\r\n             </div>\r\n             <div class=\"text-center\">\r\n               <div class=\"text-3xl font-black text-yellow-400\">{stats.bracketMatches}</div>\r\n-<<<<<<< HEAD\r\n-              <div class=\"text-xs text-gray-400\">Playoffs</div>\r\n-            </div>\r\n-          </div>\r\n-\r\n-          <!-- Win/Loss/Draw Distribution -->\r\n-          <div class=\"mb-4\">\r\n-            <h3 class=\"text-sm font-bold text-gray-300 mb-2\">Match Outcomes</h3>\r\n-            <div class=\"flex gap-2\">\r\n-              <div class=\"flex-1 bg-green-900/30 rounded p-2 text-center\">\r\n-                <div class=\"text-lg font-bold text-green-400\">{stats.totalWins}</div>\r\n-                <div class=\"text-xs text-gray-400\">Wins</div>\r\n-              </div>\r\n-              <div class=\"flex-1 bg-yellow-900/30 rounded p-2 text-center\">\r\n-                <div class=\"text-lg font-bold text-yellow-400\">{stats.totalDraws}</div>\r\n-                <div class=\"text-xs text-gray-400\">Draws</div>\r\n-              </div>\r\n-              <div class=\"flex-1 bg-red-900/30 rounded p-2 text-center\">\r\n-                <div class=\"text-lg font-bold text-red-400\">{stats.totalLosses}</div>\r\n-                <div class=\"text-xs text-gray-400\">Losses</div>\r\n-              </div>\r\n-            </div>\r\n-          </div>\r\n-\r\n-          <div class=\"text-center text-sm text-gray-400\">\r\n-            Average Points per Match: <span class=\"text-cyber-green font-bold\">{stats.avgPointsPerMatch}</span>\r\n-          </div>\r\n-        </div>\r\n-      {/if}\r\n-\r\n-      <!-- Player Performance Rankings -->\r\n-=======\r\n               <div class=\"text-xs text-gray-400\">Playoff Maps</div>\r\n             </div>\r\n           </div>\r\n \r\n@@ -593,45 +488,30 @@\n         </div>\r\n       {/if}\r\n \r\n       <!-- Player Performance Rankings (CS-Focused: Rounds Won) -->\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n       <div class=\"glass rounded-lg p-6 mb-6\">\r\n         <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n           <svg class=\"w-5 h-5 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/>\r\n           </svg>\r\n-<<<<<<< HEAD\r\n-          Player Performance Rankings\r\n-=======\r\n           Final Tournament Rankings\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n         </h2>\r\n \r\n         <div class=\"space-y-2\">\r\n           {#each playerStats as player, index}\r\n-<<<<<<< HEAD\r\n-            <div class=\"flex items-center gap-4 p-3 rounded-lg bg-space-700/50 hover:bg-space-700 transition-colors\">\r\n-              <!-- Rank -->\r\n-              <div class=\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\r\n-=======\r\n             <div class=\"flex items-center gap-3 p-3 rounded-lg bg-space-700/50 hover:bg-space-700 transition-colors\">\r\n               <!-- Rank -->\r\n               <div class=\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm flex-shrink-0\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {index === 0 ? 'bg-gradient-to-br from-yellow-400 to-yellow-600 text-space-900' :\r\n                  index === 1 ? 'bg-gradient-to-br from-gray-300 to-gray-500 text-space-900' :\r\n                  index === 2 ? 'bg-gradient-to-br from-orange-400 to-orange-600 text-space-900' :\r\n                  'bg-space-600 text-gray-400'}\">\r\n                 {index + 1}\r\n               </div>\r\n \r\n               <!-- Player Avatar -->\r\n-<<<<<<< HEAD\r\n-              <div class=\"w-10 h-10 rounded-full flex items-center justify-center\">\r\n-=======\r\n               <div class=\"w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0\">\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if player.profilePhoto}\r\n                   <img src={player.profilePhoto} alt=\"Profile\" class=\"w-10 h-10 rounded-full object-cover\" />\r\n                 {:else}\r\n                   <div class=\"w-10 h-10 rounded-full bg-gradient-to-br from-cyan-500 to-blue-500 flex items-center justify-center\">\r\n@@ -640,32 +520,8 @@\n                 {/if}\r\n               </div>\r\n \r\n               <!-- Player Info -->\r\n-<<<<<<< HEAD\r\n-              <div class=\"flex-1\">\r\n-                <div class=\"font-bold text-white\">{player.name}</div>\r\n-                <div class=\"text-xs text-gray-400\">\r\n-                  {player.totalGames} games • {player.wins}W {player.draws}D {player.losses}L\r\n-                </div>\r\n-              </div>\r\n-\r\n-              <!-- Stats -->\r\n-              <div class=\"text-right\">\r\n-                <div class=\"text-lg font-black text-cyber-green\">{player.points}</div>\r\n-                <div class=\"text-xs text-gray-400\">Points</div>\r\n-              </div>\r\n-\r\n-              <div class=\"text-right\">\r\n-                <div class=\"text-lg font-black text-cyber-blue\">{player.winRate}%</div>\r\n-                <div class=\"text-xs text-gray-400\">Win Rate</div>\r\n-              </div>\r\n-\r\n-              <div class=\"text-right\">\r\n-                <div class=\"text-lg font-black text-cyber-pink\">{player.avgPoints}</div>\r\n-                <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n-              </div>\r\n-=======\r\n               <div class=\"flex-1 min-w-0\">\r\n                 <div class=\"font-bold text-white truncate\">{player.name}</div>\r\n                 <div class=\"text-xs text-gray-400\">\r\n                   {player.matchesPlayed} matches • Best: {player.bestMatch}\r\n@@ -706,9 +562,8 @@\n                 <div class=\"text-lg font-bold text-yellow-400\">{player.mapsWon}</div>\r\n                 <div class=\"text-xs text-gray-400\">{isHealthBased ? 'Rounds Won' : 'Maps Won'}</div>\r\n               </div>\r\n               {/if}\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n             </div>\r\n           {/each}\r\n         </div>\r\n       </div>\r\n@@ -719,13 +574,9 @@\n           <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n             <svg class=\"w-5 h-5 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n               <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"/>\r\n             </svg>\r\n-<<<<<<< HEAD\r\n-            Group Performance\r\n-=======\r\n             Group Performance ({isHealthBased ? 'HP' : isKillBased ? 'Kills' : 'Rounds'})\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n           </h2>\r\n \r\n           <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n             {#each groupStats as group}\r\n@@ -740,23 +591,14 @@\n                     <div class=\"text-lg font-bold text-cyber-green\">{group.totalMatches}</div>\r\n                     <div class=\"text-xs text-gray-400\">Matches</div>\r\n                   </div>\r\n                   <div>\r\n-<<<<<<< HEAD\r\n-                    <div class=\"text-lg font-bold text-cyber-blue\">{group.completedMatches}</div>\r\n-                    <div class=\"text-xs text-gray-400\">Completed</div>\r\n-                  </div>\r\n-                  <div>\r\n-                    <div class=\"text-lg font-bold text-cyber-pink\">{group.avgPoints}</div>\r\n-                    <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n-=======\r\n                     <div class=\"text-lg font-bold text-cyan-400\">{group.totalScore}</div>\r\n                     <div class=\"text-xs text-gray-400\">{isHealthBased ? 'HP' : isKillBased ? 'Kills' : 'Rounds'}</div>\r\n                   </div>\r\n                   <div>\r\n                     <div class=\"text-lg font-bold text-purple-400\">{group.avgScorePerMatch}</div>\r\n                     <div class=\"text-xs text-gray-400\">Avg/Match</div>\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                   </div>\r\n                 </div>\r\n \r\n                 <!-- Progress Bar -->\r\n@@ -809,13 +651,9 @@\n                 'bg-cyber-blue' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n             <div class=\"flex-1\">\r\n               <div class=\"font-bold text-white\">Group Stage</div>\r\n               <div class=\"text-sm text-gray-400\">\r\n-<<<<<<< HEAD\r\n-                {tournamentData.matches?.filter(m => m.completed).length || 0} of {tournamentData.matches?.length || 0} matches completed\r\n-=======\r\n                 {tournamentData.matches?.filter((m: any) => m.completed).length || 0} of {tournamentData.matches?.length || 0} matches completed\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if tournamentData.state === 'group'}\r\n                   <span class=\"text-cyber-blue font-bold\">(Current Phase)</span>\r\n                 {/if}\r\n               </div>\r\n@@ -829,13 +667,9 @@\n                 'bg-cyber-pink' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n             <div class=\"flex-1\">\r\n               <div class=\"font-bold text-white\">Playoffs</div>\r\n               <div class=\"text-sm text-gray-400\">\r\n-<<<<<<< HEAD\r\n-                {tournamentData.bracketMatches?.filter(m => m.winnerId).length || 0} of {tournamentData.bracketMatches?.length || 0} matches completed\r\n-=======\r\n                 {tournamentData.bracketMatches?.filter((m: any) => m.winnerId).length || 0} of {tournamentData.bracketMatches?.length || 0} matches completed\r\n->>>>>>> af825c2c61492a36b9eda13c09f52ada7b5ad9c2\r\n                 {#if tournamentData.state === 'playoffs'}\r\n                   <span class=\"text-cyber-pink font-bold\">(Current Phase)</span>\r\n                 {/if}\r\n               </div>\r\n"
                },
                {
                    "date": 1764775769868,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,15 +1,25 @@\n <script lang=\"ts\">\r\n   import { onMount } from 'svelte';\r\n   import { getState, type GameType, GAME_CONFIGS } from '$lib/api';\r\n+  import { Chart, registerables } from 'chart.js';\r\n \r\n+  // Register Chart.js components\r\n+  Chart.register(...registerables);\r\n+\r\n   let { tournamentId } = $props<{ tournamentId: string }>();\r\n \r\n   let tournamentData = $state(null) as any;\r\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n   let gameType = $state<GameType>('cs16');\r\n \r\n+  // Chart references\r\n+  let playerPerformanceChart: HTMLCanvasElement;\r\n+  let scoreDistributionChart: HTMLCanvasElement;\r\n+  let winLossChart: HTMLCanvasElement;\r\n+  let progressTimelineChart: HTMLCanvasElement;\r\n+\r\n   // Reactive statements to compute statistics\r\n   let playerStats: any[] = $state([]);\r\n   let matchStats: any = $state(null);\r\n   let groupStats: any[] = $state([]);\r\n@@ -360,9 +370,217 @@\n     document.body.removeChild(a);\r\n     URL.revokeObjectURL(url);\r\n   }\r\n \r\n-  onMount(loadTournamentData);\r\n+  function initializeCharts() {\r\n+    if (!tournamentData || !playerStats || playerStats.length === 0) return;\r\n+\r\n+    // 1. Player Performance Chart (Bar Chart)\r\n+    if (playerPerformanceChart) {\r\n+      const ctx = playerPerformanceChart.getContext('2d');\r\n+      if (ctx) {\r\n+        new Chart(ctx, {\r\n+          type: 'bar',\r\n+          data: {\r\n+            labels: playerStats.map(p => p.name),\r\n+            datasets: [\r\n+              {\r\n+                label: 'Points',\r\n+                data: playerStats.map(p => p.points),\r\n+                backgroundColor: 'rgba(6, 182, 212, 0.8)', // cyber-blue\r\n+                borderColor: 'rgba(6, 182, 212, 1)',\r\n+                borderWidth: 2\r\n+              },\r\n+              {\r\n+                label: 'Wins',\r\n+                data: playerStats.map(p => p.wins),\r\n+                backgroundColor: 'rgba(34, 197, 94, 0.8)', // cyber-green\r\n+                borderColor: 'rgba(34, 197, 94, 1)',\r\n+                borderWidth: 2\r\n+              }\r\n+            ]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: {\r\n+                labels: { color: '#fff' }\r\n+              }\r\n+            },\r\n+            scales: {\r\n+              y: {\r\n+                beginAtZero: true,\r\n+                ticks: { color: '#9ca3af' },\r\n+                grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n+              },\r\n+              x: {\r\n+                ticks: { color: '#9ca3af' },\r\n+                grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n+              }\r\n+            }\r\n+          }\r\n+        });\r\n+      }\r\n+    }\r\n+\r\n+    // 2. Score Distribution Chart (Line Chart)\r\n+    if (scoreDistributionChart) {\r\n+      const ctx = scoreDistributionChart.getContext('2d');\r\n+      if (ctx) {\r\n+        new Chart(ctx, {\r\n+          type: 'line',\r\n+          data: {\r\n+            labels: playerStats.map(p => p.name),\r\n+            datasets: [\r\n+              {\r\n+                label: `${scoreLabel} Won`,\r\n+                data: playerStats.map(p => p.scoreWon || 0),\r\n+                borderColor: 'rgba(34, 197, 94, 1)',\r\n+                backgroundColor: 'rgba(34, 197, 94, 0.2)',\r\n+                tension: 0.4,\r\n+                fill: true\r\n+              },\r\n+              {\r\n+                label: `${scoreLabel} Lost`,\r\n+                data: playerStats.map(p => p.scoreLost || 0),\r\n+                borderColor: 'rgba(239, 68, 68, 1)',\r\n+                backgroundColor: 'rgba(239, 68, 68, 0.2)',\r\n+                tension: 0.4,\r\n+                fill: true\r\n+              }\r\n+            ]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: {\r\n+                labels: { color: '#fff' }\r\n+              }\r\n+            },\r\n+            scales: {\r\n+              y: {\r\n+                beginAtZero: true,\r\n+                ticks: { color: '#9ca3af' },\r\n+                grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n+              },\r\n+              x: {\r\n+                ticks: { color: '#9ca3af' },\r\n+                grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n+              }\r\n+            }\r\n+          }\r\n+        });\r\n+      }\r\n+    }\r\n+\r\n+    // 3. Win/Loss/Draw Distribution (Doughnut Chart)\r\n+    if (winLossChart) {\r\n+      const ctx = winLossChart.getContext('2d');\r\n+      if (ctx) {\r\n+        const totalWins = playerStats.reduce((sum, p) => sum + p.wins, 0);\r\n+        const totalDraws = playerStats.reduce((sum, p) => sum + p.draws, 0);\r\n+        const totalLosses = playerStats.reduce((sum, p) => sum + p.losses, 0);\r\n+\r\n+        new Chart(ctx, {\r\n+          type: 'doughnut',\r\n+          data: {\r\n+            labels: ['Wins', 'Draws', 'Losses'],\r\n+            datasets: [{\r\n+              data: [totalWins, totalDraws, totalLosses],\r\n+              backgroundColor: [\r\n+                'rgba(34, 197, 94, 0.8)',  // green\r\n+                'rgba(251, 191, 36, 0.8)', // yellow\r\n+                'rgba(239, 68, 68, 0.8)'   // red\r\n+              ],\r\n+              borderColor: [\r\n+                'rgba(34, 197, 94, 1)',\r\n+                'rgba(251, 191, 36, 1)',\r\n+                'rgba(239, 68, 68, 1)'\r\n+              ],\r\n+              borderWidth: 2\r\n+            }]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: {\r\n+                position: 'bottom',\r\n+                labels: { color: '#fff' }\r\n+              }\r\n+            }\r\n+          }\r\n+        });\r\n+      }\r\n+    }\r\n+\r\n+    // 4. Tournament Progress Timeline (Radar Chart)\r\n+    if (progressTimelineChart && playerStats.length > 0) {\r\n+      const ctx = progressTimelineChart.getContext('2d');\r\n+      if (ctx) {\r\n+        // Get top 5 players for readability\r\n+        const topPlayers = playerStats.slice(0, Math.min(5, playerStats.length));\r\n+        \r\n+        new Chart(ctx, {\r\n+          type: 'radar',\r\n+          data: {\r\n+            labels: ['Points', 'Wins', 'Win Rate %', `${scoreLabel} Won`, 'Matches Played'],\r\n+            datasets: topPlayers.map((player, index) => {\r\n+              const colors = [\r\n+                'rgba(6, 182, 212, 0.6)',   // cyan\r\n+                'rgba(34, 197, 94, 0.6)',   // green\r\n+                'rgba(251, 191, 36, 0.6)',  // yellow\r\n+                'rgba(236, 72, 153, 0.6)',  // pink\r\n+                'rgba(168, 85, 247, 0.6)'   // purple\r\n+              ];\r\n+              return {\r\n+                label: player.name,\r\n+                data: [\r\n+                  player.points,\r\n+                  player.wins * 3, // Scale wins\r\n+                  player.scoreWinRate || 0,\r\n+                  (player.scoreWon || 0) / 10, // Scale score\r\n+                  player.matchesPlayed * 2 // Scale matches\r\n+                ],\r\n+                backgroundColor: colors[index % colors.length],\r\n+                borderColor: colors[index % colors.length].replace('0.6', '1'),\r\n+                borderWidth: 2\r\n+              };\r\n+            })\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: {\r\n+                position: 'bottom',\r\n+                labels: { color: '#fff' }\r\n+              }\r\n+            },\r\n+            scales: {\r\n+              r: {\r\n+                beginAtZero: true,\r\n+                ticks: { color: '#9ca3af' },\r\n+                grid: { color: 'rgba(156, 163, 175, 0.2)' },\r\n+                pointLabels: { color: '#fff' }\r\n+              }\r\n+            }\r\n+          }\r\n+        });\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n+  onMount(async () => {\r\n+    loadTournamentData();\r\n+    \r\n+    // Initialize charts after data is loaded\r\n+    setTimeout(initializeCharts, 100);\r\n+  });\r\n+\r\n+  // ...existing code...\r\n </script>\r\n \r\n <div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 text-gaming-text px-3 py-3\">\r\n   <div class=\"max-w-7xl mx-auto\">\r\n@@ -693,7 +911,57 @@\n           </div>\r\n         </div>\r\n       </div>\r\n \r\n+      <!-- Charts Section (Add before closing div) -->\r\n+      <div class=\"glass rounded-lg p-6 mb-6\">\r\n+        <h2 class=\"text-2xl font-bold mb-6 text-white flex items-center gap-2\">\r\n+          <svg class=\"w-6 h-6 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"/>\r\n+          </svg>\r\n+          Tournament Charts & Analytics\r\n+        </h2>\r\n+\r\n+        <div class=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\r\n+          <!-- Player Performance Chart -->\r\n+          <div class=\"bg-space-700/50 rounded-lg p-4\">\r\n+            <h3 class=\"text-lg font-bold text-white mb-4\">Player Performance</h3>\r\n+            <div class=\"h-80\">\r\n+              <canvas bind:this={playerPerformanceChart}></canvas>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Score Distribution Chart -->\r\n+          <div class=\"bg-space-700/50 rounded-lg p-4\">\r\n+            <h3 class=\"text-lg font-bold text-white mb-4\">{scoreLabel} Distribution</h3>\r\n+            <div class=\"h-80\">\r\n+              <canvas bind:this={scoreDistributionChart}></canvas>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Win/Loss Distribution -->\r\n+          <div class=\"bg-space-700/50 rounded-lg p-4\">\r\n+            <h3 class=\"text-lg font-bold text-white mb-4\">Match Results Distribution</h3>\r\n+            <div class=\"h-80 flex items-center justify-center\">\r\n+              <canvas bind:this={winLossChart}></canvas>\r\n+            </div>\r\n+          </div>\r\n+\r\n+          <!-- Player Comparison Radar -->\r\n+          <div class=\"bg-space-700/50 rounded-lg p-4\">\r\n+            <h3 class=\"text-lg font-bold text-white mb-4\">Top 5 Players Comparison</h3>\r\n+            <div class=\"h-80\">\r\n+              <canvas bind:this={progressTimelineChart}></canvas>\r\n+            </div>\r\n+          </div>\r\n+        </div>\r\n+      </div>\r\n+    {:else}\r\n+      <div class=\"glass rounded-lg p-12 text-center\">\r\n+        <svg class=\"w-16 h-16 mx-auto mb-4 text-gray-500\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n+          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"/>\r\n+        </svg>\r\n+        <p class=\"text-gray-400\">No tournament data available</p>\r\n+      </div>\r\n     {/if}\r\n   </div>\r\n </div>\r\n"
                },
                {
                    "date": 1764776088084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -373,9 +373,9 @@\n \r\n   function initializeCharts() {\r\n     if (!tournamentData || !playerStats || playerStats.length === 0) return;\r\n \r\n-    // 1. Player Performance Chart (Bar Chart)\r\n+    // 1. Player Performance Chart (Bar Chart with Glow)\r\n     if (playerPerformanceChart) {\r\n       const ctx = playerPerformanceChart.getContext('2d');\r\n       if (ctx) {\r\n         new Chart(ctx, {\r\n@@ -385,46 +385,58 @@\n             datasets: [\r\n               {\r\n                 label: 'Points',\r\n                 data: playerStats.map(p => p.points),\r\n-                backgroundColor: 'rgba(6, 182, 212, 0.8)', // cyber-blue\r\n+                backgroundColor: 'rgba(6, 182, 212, 0.8)',\r\n                 borderColor: 'rgba(6, 182, 212, 1)',\r\n-                borderWidth: 2\r\n+                borderWidth: 2,\r\n+                shadowOffsetX: 0,\r\n+                shadowOffsetY: 0,\r\n+                shadowBlur: 15,\r\n+                shadowColor: 'rgba(6, 182, 212, 0.7)'\r\n               },\r\n               {\r\n                 label: 'Wins',\r\n                 data: playerStats.map(p => p.wins),\r\n-                backgroundColor: 'rgba(34, 197, 94, 0.8)', // cyber-green\r\n+                backgroundColor: 'rgba(34, 197, 94, 0.8)',\r\n                 borderColor: 'rgba(34, 197, 94, 1)',\r\n-                borderWidth: 2\r\n+                borderWidth: 2,\r\n+                shadowOffsetX: 0,\r\n+                shadowOffsetY: 0,\r\n+                shadowBlur: 15,\r\n+                shadowColor: 'rgba(34, 197, 94, 0.7)'\r\n               }\r\n             ]\r\n           },\r\n           options: {\r\n             responsive: true,\r\n             maintainAspectRatio: false,\r\n             plugins: {\r\n               legend: {\r\n-                labels: { color: '#fff' }\r\n+                labels: { \r\n+                  color: '#fff',\r\n+                  font: { size: 14, weight: 'bold' },\r\n+                  padding: 15\r\n+                }\r\n               }\r\n             },\r\n             scales: {\r\n               y: {\r\n                 beginAtZero: true,\r\n-                ticks: { color: '#9ca3af' },\r\n+                ticks: { color: '#9ca3af', font: { size: 12 } },\r\n                 grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n               },\r\n               x: {\r\n-                ticks: { color: '#9ca3af' },\r\n+                ticks: { color: '#9ca3af', font: { size: 12 } },\r\n                 grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n               }\r\n             }\r\n           }\r\n         });\r\n       }\r\n     }\r\n \r\n-    // 2. Score Distribution Chart (Line Chart)\r\n+    // 2. Score Distribution Chart (Line Chart with Glow)\r\n     if (scoreDistributionChart) {\r\n       const ctx = scoreDistributionChart.getContext('2d');\r\n       if (ctx) {\r\n         new Chart(ctx, {\r\n@@ -437,45 +449,69 @@\n                 data: playerStats.map(p => p.scoreWon || 0),\r\n                 borderColor: 'rgba(34, 197, 94, 1)',\r\n                 backgroundColor: 'rgba(34, 197, 94, 0.2)',\r\n                 tension: 0.4,\r\n-                fill: true\r\n+                fill: true,\r\n+                borderWidth: 3,\r\n+                pointRadius: 5,\r\n+                pointHoverRadius: 7,\r\n+                pointBackgroundColor: 'rgba(34, 197, 94, 1)',\r\n+                pointBorderColor: '#fff',\r\n+                pointBorderWidth: 2,\r\n+                shadowOffsetX: 0,\r\n+                shadowOffsetY: 0,\r\n+                shadowBlur: 20,\r\n+                shadowColor: 'rgba(34, 197, 94, 0.8)'\r\n               },\r\n               {\r\n                 label: `${scoreLabel} Lost`,\r\n                 data: playerStats.map(p => p.scoreLost || 0),\r\n                 borderColor: 'rgba(239, 68, 68, 1)',\r\n                 backgroundColor: 'rgba(239, 68, 68, 0.2)',\r\n                 tension: 0.4,\r\n-                fill: true\r\n+                fill: true,\r\n+                borderWidth: 3,\r\n+                pointRadius: 5,\r\n+                pointHoverRadius: 7,\r\n+                pointBackgroundColor: 'rgba(239, 68, 68, 1)',\r\n+                pointBorderColor: '#fff',\r\n+                pointBorderWidth: 2,\r\n+                shadowOffsetX: 0,\r\n+                shadowOffsetY: 0,\r\n+                shadowBlur: 20,\r\n+                shadowColor: 'rgba(239, 68, 68, 0.8)'\r\n               }\r\n             ]\r\n           },\r\n           options: {\r\n             responsive: true,\r\n             maintainAspectRatio: false,\r\n             plugins: {\r\n               legend: {\r\n-                labels: { color: '#fff' }\r\n+                labels: { \r\n+                  color: '#fff',\r\n+                  font: { size: 14, weight: 'bold' },\r\n+                  padding: 15\r\n+                }\r\n               }\r\n             },\r\n             scales: {\r\n               y: {\r\n                 beginAtZero: true,\r\n-                ticks: { color: '#9ca3af' },\r\n+                ticks: { color: '#9ca3af', font: { size: 12 } },\r\n                 grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n               },\r\n               x: {\r\n-                ticks: { color: '#9ca3af' },\r\n+                ticks: { color: '#9ca3af', font: { size: 12 } },\r\n                 grid: { color: 'rgba(156, 163, 175, 0.1)' }\r\n               }\r\n             }\r\n           }\r\n         });\r\n       }\r\n     }\r\n \r\n-    // 3. Win/Loss/Draw Distribution (Doughnut Chart)\r\n+    // 3. Win/Loss/Draw Distribution (Doughnut Chart with Spacing and Glow)\r\n     if (winLossChart) {\r\n       const ctx = winLossChart.getContext('2d');\r\n       if (ctx) {\r\n         const totalWins = playerStats.reduce((sum, p) => sum + p.wins, 0);\r\n@@ -488,65 +524,97 @@\n             labels: ['Wins', 'Draws', 'Losses'],\r\n             datasets: [{\r\n               data: [totalWins, totalDraws, totalLosses],\r\n               backgroundColor: [\r\n-                'rgba(34, 197, 94, 0.8)',  // green\r\n-                'rgba(251, 191, 36, 0.8)', // yellow\r\n-                'rgba(239, 68, 68, 0.8)'   // red\r\n+                'rgba(34, 197, 94, 0.9)',\r\n+                'rgba(251, 191, 36, 0.9)',\r\n+                'rgba(239, 68, 68, 0.9)'\r\n               ],\r\n               borderColor: [\r\n                 'rgba(34, 197, 94, 1)',\r\n                 'rgba(251, 191, 36, 1)',\r\n                 'rgba(239, 68, 68, 1)'\r\n               ],\r\n-              borderWidth: 2\r\n+              borderWidth: 3,\r\n+              hoverOffset: 25, // Spacing when hovering\r\n+              offset: 10, // Default spacing between segments\r\n+              shadowOffsetX: 0,\r\n+              shadowOffsetY: 0,\r\n+              shadowBlur: 25,\r\n+              shadowColor: 'rgba(255, 255, 255, 0.5)'\r\n             }]\r\n           },\r\n           options: {\r\n             responsive: true,\r\n             maintainAspectRatio: false,\r\n+            cutout: '60%', // Makes it a doughnut (larger cutout = more spacing)\r\n             plugins: {\r\n               legend: {\r\n                 position: 'bottom',\r\n-                labels: { color: '#fff' }\r\n+                labels: { \r\n+                  color: '#fff',\r\n+                  font: { size: 14, weight: 'bold' },\r\n+                  padding: 20,\r\n+                  usePointStyle: true,\r\n+                  pointStyle: 'circle'\r\n+                }\r\n+              },\r\n+              tooltip: {\r\n+                backgroundColor: 'rgba(0, 0, 0, 0.8)',\r\n+                titleColor: '#fff',\r\n+                bodyColor: '#fff',\r\n+                borderColor: 'rgba(6, 182, 212, 0.5)',\r\n+                borderWidth: 2,\r\n+                padding: 12,\r\n+                cornerRadius: 8,\r\n+                displayColors: true\r\n               }\r\n             }\r\n           }\r\n         });\r\n       }\r\n     }\r\n \r\n-    // 4. Tournament Progress Timeline (Radar Chart)\r\n+    // 4. Tournament Progress Timeline (Radar Chart with Glow)\r\n     if (progressTimelineChart && playerStats.length > 0) {\r\n       const ctx = progressTimelineChart.getContext('2d');\r\n       if (ctx) {\r\n-        // Get top 5 players for readability\r\n         const topPlayers = playerStats.slice(0, Math.min(5, playerStats.length));\r\n         \r\n         new Chart(ctx, {\r\n           type: 'radar',\r\n           data: {\r\n             labels: ['Points', 'Wins', 'Win Rate %', `${scoreLabel} Won`, 'Matches Played'],\r\n             datasets: topPlayers.map((player, index) => {\r\n               const colors = [\r\n-                'rgba(6, 182, 212, 0.6)',   // cyan\r\n-                'rgba(34, 197, 94, 0.6)',   // green\r\n-                'rgba(251, 191, 36, 0.6)',  // yellow\r\n-                'rgba(236, 72, 153, 0.6)',  // pink\r\n-                'rgba(168, 85, 247, 0.6)'   // purple\r\n+                { bg: 'rgba(6, 182, 212, 0.3)', border: 'rgba(6, 182, 212, 1)', glow: 'rgba(6, 182, 212, 0.8)' },\r\n+                { bg: 'rgba(34, 197, 94, 0.3)', border: 'rgba(34, 197, 94, 1)', glow: 'rgba(34, 197, 94, 0.8)' },\r\n+                { bg: 'rgba(251, 191, 36, 0.3)', border: 'rgba(251, 191, 36, 1)', glow: 'rgba(251, 191, 36, 0.8)' },\r\n+                { bg: 'rgba(236, 72, 153, 0.3)', border: 'rgba(236, 72, 153, 1)', glow: 'rgba(236, 72, 153, 0.8)' },\r\n+                { bg: 'rgba(168, 85, 247, 0.3)', border: 'rgba(168, 85, 247, 1)', glow: 'rgba(168, 85, 247, 0.8)' }\r\n               ];\r\n+              const color = colors[index % colors.length];\r\n               return {\r\n                 label: player.name,\r\n                 data: [\r\n                   player.points,\r\n-                  player.wins * 3, // Scale wins\r\n+                  player.wins * 3,\r\n                   player.scoreWinRate || 0,\r\n-                  (player.scoreWon || 0) / 10, // Scale score\r\n-                  player.matchesPlayed * 2 // Scale matches\r\n+                  (player.scoreWon || 0) / 10,\r\n+                  player.matchesPlayed * 2\r\n                 ],\r\n-                backgroundColor: colors[index % colors.length],\r\n-                borderColor: colors[index % colors.length].replace('0.6', '1'),\r\n-                borderWidth: 2\r\n+                backgroundColor: color.bg,\r\n+                borderColor: color.border,\r\n+                borderWidth: 3,\r\n+                pointRadius: 5,\r\n+                pointHoverRadius: 7,\r\n+                pointBackgroundColor: color.border,\r\n+                pointBorderColor: '#fff',\r\n+                pointBorderWidth: 2,\r\n+                shadowOffsetX: 0,\r\n+                shadowOffsetY: 0,\r\n+                shadowBlur: 20,\r\n+                shadowColor: color.glow\r\n               };\r\n             })\r\n           },\r\n           options: {\r\n@@ -554,17 +622,32 @@\n             maintainAspectRatio: false,\r\n             plugins: {\r\n               legend: {\r\n                 position: 'bottom',\r\n-                labels: { color: '#fff' }\r\n+                labels: { \r\n+                  color: '#fff',\r\n+                  font: { size: 12, weight: 'bold' },\r\n+                  padding: 15,\r\n+                  usePointStyle: true\r\n+                }\r\n               }\r\n             },\r\n             scales: {\r\n               r: {\r\n                 beginAtZero: true,\r\n-                ticks: { color: '#9ca3af' },\r\n-                grid: { color: 'rgba(156, 163, 175, 0.2)' },\r\n-                pointLabels: { color: '#fff' }\r\n+                ticks: { \r\n+                  color: '#9ca3af',\r\n+                  backdropColor: 'transparent',\r\n+                  font: { size: 11 }\r\n+                },\r\n+                grid: { \r\n+                  color: 'rgba(156, 163, 175, 0.2)',\r\n+                  circular: true\r\n+                },\r\n+                pointLabels: { \r\n+                  color: '#fff',\r\n+                  font: { size: 13, weight: 'bold' }\r\n+                }\r\n               }\r\n             }\r\n           }\r\n         });\r\n"
                },
                {
                    "date": 1764776190074,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,10 +2,9 @@\n   import { onMount } from 'svelte';\r\n   import { getState, type GameType, GAME_CONFIGS } from '$lib/api';\r\n   import { Chart, registerables } from 'chart.js';\r\n \r\n-  // Register Chart.js components\r\n-  Chart.register(...registerables);\r\n+=  Chart.register(...registerables);\r\n \r\n   let { tournamentId } = $props<{ tournamentId: string }>();\r\n \r\n   let tournamentData = $state(null) as any;\r\n"
                },
                {
                    "date": 1764776199744,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,9 +11,8 @@\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n   let gameType = $state<GameType>('cs16');\r\n \r\n-  // Chart references\r\n   let playerPerformanceChart: HTMLCanvasElement;\r\n   let scoreDistributionChart: HTMLCanvasElement;\r\n   let winLossChart: HTMLCanvasElement;\r\n   let progressTimelineChart: HTMLCanvasElement;\r\n@@ -433,9 +432,8 @@\n         });\r\n       }\r\n     }\r\n \r\n-    // 2. Score Distribution Chart (Line Chart with Glow)\r\n     if (scoreDistributionChart) {\r\n       const ctx = scoreDistributionChart.getContext('2d');\r\n       if (ctx) {\r\n         new Chart(ctx, {\r\n"
                },
                {
                    "date": 1764776207009,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -371,9 +371,8 @@\n \r\n   function initializeCharts() {\r\n     if (!tournamentData || !playerStats || playerStats.length === 0) return;\r\n \r\n-    // 1. Player Performance Chart (Bar Chart with Glow)\r\n     if (playerPerformanceChart) {\r\n       const ctx = playerPerformanceChart.getContext('2d');\r\n       if (ctx) {\r\n         new Chart(ctx, {\r\n@@ -506,9 +505,8 @@\n         });\r\n       }\r\n     }\r\n \r\n-    // 3. Win/Loss/Draw Distribution (Doughnut Chart with Spacing and Glow)\r\n     if (winLossChart) {\r\n       const ctx = winLossChart.getContext('2d');\r\n       if (ctx) {\r\n         const totalWins = playerStats.reduce((sum, p) => sum + p.wins, 0);\r\n"
                },
                {
                    "date": 1764776215451,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -529,10 +529,10 @@\n                 'rgba(251, 191, 36, 1)',\r\n                 'rgba(239, 68, 68, 1)'\r\n               ],\r\n               borderWidth: 3,\r\n-              hoverOffset: 25, // Spacing when hovering\r\n-              offset: 10, // Default spacing between segments\r\n+              hoverOffset: 25, \r\n+              offset: 10, \r\n               shadowOffsetX: 0,\r\n               shadowOffsetY: 0,\r\n               shadowBlur: 25,\r\n               shadowColor: 'rgba(255, 255, 255, 0.5)'\r\n"
                },
                {
                    "date": 1764776223380,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -540,9 +540,9 @@\n           },\r\n           options: {\r\n             responsive: true,\r\n             maintainAspectRatio: false,\r\n-            cutout: '60%', // Makes it a doughnut (larger cutout = more spacing)\r\n+            cutout: '60%', \r\n             plugins: {\r\n               legend: {\r\n                 position: 'bottom',\r\n                 labels: { \r\n@@ -568,10 +568,9 @@\n         });\r\n       }\r\n     }\r\n \r\n-    // 4. Tournament Progress Timeline (Radar Chart with Glow)\r\n-    if (progressTimelineChart && playerStats.length > 0) {\r\n+\\    if (progressTimelineChart && playerStats.length > 0) {\r\n       const ctx = progressTimelineChart.getContext('2d');\r\n       if (ctx) {\r\n         const topPlayers = playerStats.slice(0, Math.min(5, playerStats.length));\r\n         \r\n"
                },
                {
                    "date": 1764776232967,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -568,9 +568,9 @@\n         });\r\n       }\r\n     }\r\n \r\n-\\    if (progressTimelineChart && playerStats.length > 0) {\r\n+    if (progressTimelineChart && playerStats.length > 0) {\r\n       const ctx = progressTimelineChart.getContext('2d');\r\n       if (ctx) {\r\n         const topPlayers = playerStats.slice(0, Math.min(5, playerStats.length));\r\n         \r\n@@ -655,9 +655,8 @@\n     // Initialize charts after data is loaded\r\n     setTimeout(initializeCharts, 100);\r\n   });\r\n \r\n-  // ...existing code...\r\n </script>\r\n \r\n <div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 text-gaming-text px-3 py-3\">\r\n   <div class=\"max-w-7xl mx-auto\">\r\n"
                },
                {
                    "date": 1764776243084,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -651,9 +651,8 @@\n \r\n   onMount(async () => {\r\n     loadTournamentData();\r\n     \r\n-    // Initialize charts after data is loaded\r\n     setTimeout(initializeCharts, 100);\r\n   });\r\n \r\n </script>\r\n@@ -987,9 +986,8 @@\n           </div>\r\n         </div>\r\n       </div>\r\n \r\n-      <!-- Charts Section (Add before closing div) -->\r\n       <div class=\"glass rounded-lg p-6 mb-6\">\r\n         <h2 class=\"text-2xl font-bold mb-6 text-white flex items-center gap-2\">\r\n           <svg class=\"w-6 h-6 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n             <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"/>\r\n"
                },
                {
                    "date": 1764776859595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,9 +2,9 @@\n   import { onMount } from 'svelte';\r\n   import { getState, type GameType, GAME_CONFIGS } from '$lib/api';\r\n   import { Chart, registerables } from 'chart.js';\r\n \r\n-=  Chart.register(...registerables);\r\n+  Chart.register(...registerables);\r\n \r\n   let { tournamentId } = $props<{ tournamentId: string }>();\r\n \r\n   let tournamentData = $state(null) as any;\r\n"
                },
                {
                    "date": 1764777026809,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,12 +11,12 @@\n   let loading = $state(true);\r\n   let error = $state(null) as string | null;\r\n   let gameType = $state<GameType>('cs16');\r\n \r\n-  let playerPerformanceChart: HTMLCanvasElement;\r\n-  let scoreDistributionChart: HTMLCanvasElement;\r\n-  let winLossChart: HTMLCanvasElement;\r\n-  let progressTimelineChart: HTMLCanvasElement;\r\n+  let playerPerformanceChart = $state<HTMLCanvasElement | undefined>(undefined);\r\n+  let scoreDistributionChart = $state<HTMLCanvasElement | undefined>(undefined);\r\n+  let winLossChart = $state<HTMLCanvasElement | undefined>(undefined);\r\n+  let progressTimelineChart = $state<HTMLCanvasElement | undefined>(undefined);\r\n \r\n   // Reactive statements to compute statistics\r\n   let playerStats: any[] = $state([]);\r\n   let matchStats: any = $state(null);\r\n"
                }
            ],
            "date": 1764024886865,
            "name": "Commit-0",
            "content": "<script lang=\"ts\">\r\n  import { onMount } from 'svelte';\r\n  import { getState } from '$lib/api';\r\n\r\n  let { tournamentId } = $props<{ tournamentId: string }>();\r\n\r\n  let tournamentData = $state(null) as any;\r\n  let loading = $state(true);\r\n  let error = $state(null) as string | null;\r\n\r\n  // Computed statistics\r\n  let playerStats = $derived(() => {\r\n    if (!tournamentData?.players) return [];\r\n\r\n    return tournamentData.players.map(player => {\r\n      const totalGames = player.wins + player.draws + player.losses;\r\n      const winRate = totalGames > 0 ? (player.wins / totalGames) * 100 : 0;\r\n      const avgPoints = totalGames > 0 ? player.points / totalGames : 0;\r\n\r\n      return {\r\n        ...player,\r\n        totalGames,\r\n        winRate: Math.round(winRate * 10) / 10,\r\n        avgPoints: Math.round(avgPoints * 10) / 10,\r\n        performance: player.points + (player.wins * 2) + (player.draws * 1) // Custom performance metric\r\n      };\r\n    }).sort((a, b) => b.performance - a.performance);\r\n  });\r\n\r\n  let matchStats = $derived(() => {\r\n    if (!tournamentData) return null;\r\n\r\n    const groupMatches = tournamentData.matches || [];\r\n    const bracketMatches = tournamentData.bracketMatches || [];\r\n\r\n    const totalMatches = groupMatches.length + bracketMatches.length;\r\n    const completedGroupMatches = groupMatches.filter(m => m.completed).length;\r\n    const completedBracketMatches = bracketMatches.filter(m => m.winnerId).length;\r\n    const totalCompleted = completedGroupMatches + completedBracketMatches;\r\n\r\n    // Calculate win/draw/loss distribution\r\n    let totalWins = 0, totalDraws = 0, totalLosses = 0;\r\n\r\n    groupMatches.forEach(match => {\r\n      if (match.result) {\r\n        Object.values(match.result).forEach((result: any) => {\r\n          if (result.points === 3) totalWins++;\r\n          else if (result.points === 1) totalDraws++;\r\n          else totalLosses++;\r\n        });\r\n      }\r\n    });\r\n\r\n    bracketMatches.forEach(match => {\r\n      if (match.winnerId) totalWins++; // Each bracket match produces one winner\r\n    });\r\n\r\n    return {\r\n      totalMatches,\r\n      completedMatches: totalCompleted,\r\n      completionRate: totalMatches > 0 ? Math.round((totalCompleted / totalMatches) * 100) : 0,\r\n      groupMatches: groupMatches.length,\r\n      bracketMatches: bracketMatches.length,\r\n      totalWins,\r\n      totalDraws,\r\n      totalLosses,\r\n      avgPointsPerMatch: totalMatches > 0 ? Math.round((totalWins * 3 + totalDraws * 1) / totalMatches * 10) / 10 : 0\r\n    };\r\n  });\r\n\r\n  let groupStats = $derived(() => {\r\n    if (!tournamentData?.pods) return [];\r\n\r\n    return tournamentData.pods.map(pod => {\r\n      const podMatches = tournamentData.matches.filter(m => m.podId === pod.id);\r\n      const completedMatches = podMatches.filter(m => m.completed).length;\r\n      const totalPoints = pod.players.reduce((sum, playerId) => {\r\n        const player = tournamentData.players.find(p => p.id === playerId);\r\n        return sum + (player?.points || 0);\r\n      }, 0);\r\n\r\n      return {\r\n        ...pod,\r\n        totalMatches: podMatches.length,\r\n        completedMatches,\r\n        completionRate: podMatches.length > 0 ? Math.round((completedMatches / podMatches.length) * 100) : 0,\r\n        totalPoints,\r\n        avgPoints: pod.players.length > 0 ? Math.round(totalPoints / pod.players.length * 10) / 10 : 0\r\n      };\r\n    });\r\n  });\r\n\r\n  let tournamentOverview = $derived(() => {\r\n    if (!tournamentData) return null;\r\n\r\n    const startTime = new Date(); // Would need to be stored in tournament data\r\n    const currentTime = new Date();\r\n    const duration = Math.floor((currentTime.getTime() - startTime.getTime()) / (1000 * 60)); // minutes\r\n\r\n    return {\r\n      name: tournamentData.name,\r\n      state: tournamentData.state,\r\n      playerCount: tournamentData.players?.length || 0,\r\n      groupCount: tournamentData.pods?.length || 0,\r\n      duration: `${duration} minutes`,\r\n      isCompleted: tournamentData.state === 'completed'\r\n    };\r\n  });\r\n\r\n  async function loadTournamentData() {\r\n    try {\r\n      loading = true;\r\n      error = null;\r\n      tournamentData = await getState(tournamentId);\r\n    } catch (err) {\r\n      error = err instanceof Error ? err.message : 'Failed to load tournament data';\r\n      console.error('Error loading tournament data:', err);\r\n    } finally {\r\n      loading = false;\r\n    }\r\n  }\r\n\r\n  onMount(loadTournamentData);\r\n</script>\r\n\r\n<div class=\"min-h-screen bg-gradient-to-br from-space-900 via-space-800 to-space-900 text-gaming-text px-3 py-3\">\r\n  <div class=\"max-w-7xl mx-auto\">\r\n\r\n    <!-- Header -->\r\n    <div class=\"flex justify-between items-center mb-6\">\r\n      <div>\r\n        <a href={`/tournament/${tournamentId}`} class=\"text-gray-400 hover:text-cyber-green transition-colors mb-1 inline-block text-xs flex items-center gap-1\">\r\n          <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\"><path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M10 19l-7-7m0 0l7-7m-7 7h18\"/></svg>\r\n          Back to Dashboard\r\n        </a>\r\n        <h1 class=\"text-2xl font-black gradient-text flex items-center gap-2\">\r\n          <svg class=\"w-6 h-6 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"/>\r\n          </svg>\r\n          TOURNAMENT STATISTICS\r\n        </h1>\r\n      </div>\r\n    </div>\r\n\r\n    {#if loading}\r\n      <div class=\"flex justify-center items-center py-20\">\r\n        <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-cyber-green\"></div>\r\n      </div>\r\n    {:else if error}\r\n      <div class=\"glass rounded-lg p-6 text-center\">\r\n        <svg class=\"w-12 h-12 mx-auto mb-3 text-red-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n        </svg>\r\n        <p class=\"text-red-400 font-bold\">Error loading statistics</p>\r\n        <p class=\"text-gray-400 text-sm mt-1\">{error}</p>\r\n      </div>\r\n    {:else if tournamentData}\r\n\r\n      <!-- Tournament Overview -->\r\n      {#if tournamentOverview}\r\n        {@const overview = tournamentOverview}\r\n        <div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6\">\r\n          <div class=\"glass rounded-lg p-4 text-center\">\r\n            <div class=\"text-2xl font-black text-cyber-green mb-1\">{overview.playerCount}</div>\r\n            <div class=\"text-xs text-gray-400 uppercase tracking-wide\">Total Players</div>\r\n          </div>\r\n          <div class=\"glass rounded-lg p-4 text-center\">\r\n            <div class=\"text-2xl font-black text-cyber-blue mb-1\">{overview.groupCount}</div>\r\n            <div class=\"text-xs text-gray-400 uppercase tracking-wide\">Groups</div>\r\n          </div>\r\n          <div class=\"glass rounded-lg p-4 text-center\">\r\n            <div class=\"text-2xl font-black text-cyber-pink mb-1\">{overview.state}</div>\r\n            <div class=\"text-xs text-gray-400 uppercase tracking-wide\">Current Phase</div>\r\n          </div>\r\n          <div class=\"glass rounded-lg p-4 text-center\">\r\n            <div class=\"text-2xl font-black text-yellow-400 mb-1\">{matchStats?.completionRate || 0}%</div>\r\n            <div class=\"text-xs text-gray-400 uppercase tracking-wide\">Complete</div>\r\n          </div>\r\n        </div>\r\n      {/if}\r\n\r\n      <!-- Match Statistics -->\r\n      {#if matchStats}\r\n        {@const stats = matchStats}\r\n        <div class=\"glass rounded-lg p-6 mb-6\">\r\n          <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n            <svg class=\"w-5 h-5 text-cyber-green\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z\"/>\r\n            </svg>\r\n            Match Statistics\r\n          </h2>\r\n\r\n          <div class=\"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4\">\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-black text-cyber-green\">{stats.totalMatches}</div>\r\n              <div class=\"text-xs text-gray-400\">Total Matches</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-black text-cyber-blue\">{stats.completedMatches}</div>\r\n              <div class=\"text-xs text-gray-400\">Completed</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-black text-cyber-pink\">{stats.groupMatches}</div>\r\n              <div class=\"text-xs text-gray-400\">Group Stage</div>\r\n            </div>\r\n            <div class=\"text-center\">\r\n              <div class=\"text-3xl font-black text-yellow-400\">{stats.bracketMatches}</div>\r\n              <div class=\"text-xs text-gray-400\">Playoffs</div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Win/Loss/Draw Distribution -->\r\n          <div class=\"mb-4\">\r\n            <h3 class=\"text-sm font-bold text-gray-300 mb-2\">Match Outcomes</h3>\r\n            <div class=\"flex gap-2\">\r\n              <div class=\"flex-1 bg-green-900/30 rounded p-2 text-center\">\r\n                <div class=\"text-lg font-bold text-green-400\">{stats.totalWins}</div>\r\n                <div class=\"text-xs text-gray-400\">Wins</div>\r\n              </div>\r\n              <div class=\"flex-1 bg-yellow-900/30 rounded p-2 text-center\">\r\n                <div class=\"text-lg font-bold text-yellow-400\">{stats.totalDraws}</div>\r\n                <div class=\"text-xs text-gray-400\">Draws</div>\r\n              </div>\r\n              <div class=\"flex-1 bg-red-900/30 rounded p-2 text-center\">\r\n                <div class=\"text-lg font-bold text-red-400\">{stats.totalLosses}</div>\r\n                <div class=\"text-xs text-gray-400\">Losses</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"text-center text-sm text-gray-400\">\r\n            Average Points per Match: <span class=\"text-cyber-green font-bold\">{stats.avgPointsPerMatch}</span>\r\n          </div>\r\n        </div>\r\n      {/if}\r\n\r\n      <!-- Player Performance Rankings -->\r\n      <div class=\"glass rounded-lg p-6 mb-6\">\r\n        <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n          <svg class=\"w-5 h-5 text-cyber-blue\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"/>\r\n          </svg>\r\n          Player Performance Rankings\r\n        </h2>\r\n\r\n        <div class=\"space-y-2\">\r\n          {#each playerStats as player, index}\r\n            <div class=\"flex items-center gap-4 p-3 rounded-lg bg-space-700/50 hover:bg-space-700 transition-colors\">\r\n              <!-- Rank -->\r\n              <div class=\"w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm\r\n                {index === 0 ? 'bg-gradient-to-br from-yellow-400 to-yellow-600 text-space-900' :\r\n                 index === 1 ? 'bg-gradient-to-br from-gray-300 to-gray-500 text-space-900' :\r\n                 index === 2 ? 'bg-gradient-to-br from-orange-400 to-orange-600 text-space-900' :\r\n                 'bg-space-600 text-gray-400'}\">\r\n                {index + 1}\r\n              </div>\r\n\r\n              <!-- Player Info -->\r\n              <div class=\"flex-1\">\r\n                <div class=\"font-bold text-white\">{player.name}</div>\r\n                <div class=\"text-xs text-gray-400\">\r\n                  {player.totalGames} games • {player.wins}W {player.draws}D {player.losses}L\r\n                </div>\r\n              </div>\r\n\r\n              <!-- Stats -->\r\n              <div class=\"text-right\">\r\n                <div class=\"text-lg font-black text-cyber-green\">{player.points}</div>\r\n                <div class=\"text-xs text-gray-400\">Points</div>\r\n              </div>\r\n\r\n              <div class=\"text-right\">\r\n                <div class=\"text-lg font-black text-cyber-blue\">{player.winRate}%</div>\r\n                <div class=\"text-xs text-gray-400\">Win Rate</div>\r\n              </div>\r\n\r\n              <div class=\"text-right\">\r\n                <div class=\"text-lg font-black text-cyber-pink\">{player.avgPoints}</div>\r\n                <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n              </div>\r\n            </div>\r\n          {/each}\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Group Performance -->\r\n      {#if groupStats.length > 0}\r\n        <div class=\"glass rounded-lg p-6 mb-6\">\r\n          <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n            <svg class=\"w-5 h-5 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\"/>\r\n            </svg>\r\n            Group Performance\r\n          </h2>\r\n\r\n          <div class=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {#each groupStats as group}\r\n              <div class=\"bg-space-700/50 rounded-lg p-4\">\r\n                <div class=\"flex justify-between items-start mb-2\">\r\n                  <h3 class=\"font-bold text-white\">{group.name || `Group ${group.id.slice(-1)}`}</h3>\r\n                  <div class=\"text-sm text-gray-400\">{group.players.length} players</div>\r\n                </div>\r\n\r\n                <div class=\"grid grid-cols-3 gap-2 text-center\">\r\n                  <div>\r\n                    <div class=\"text-lg font-bold text-cyber-green\">{group.totalMatches}</div>\r\n                    <div class=\"text-xs text-gray-400\">Matches</div>\r\n                  </div>\r\n                  <div>\r\n                    <div class=\"text-lg font-bold text-cyber-blue\">{group.completedMatches}</div>\r\n                    <div class=\"text-xs text-gray-400\">Completed</div>\r\n                  </div>\r\n                  <div>\r\n                    <div class=\"text-lg font-bold text-cyber-pink\">{group.avgPoints}</div>\r\n                    <div class=\"text-xs text-gray-400\">Avg Pts</div>\r\n                  </div>\r\n                </div>\r\n\r\n                <!-- Progress Bar -->\r\n                <div class=\"mt-3\">\r\n                  <div class=\"flex justify-between text-xs text-gray-400 mb-1\">\r\n                    <span>Progress</span>\r\n                    <span>{group.completionRate}%</span>\r\n                  </div>\r\n                  <div class=\"w-full bg-space-600 rounded-full h-2\">\r\n                    <div\r\n                      class=\"bg-gradient-to-r from-cyber-green to-cyber-blue h-2 rounded-full transition-all duration-300\"\r\n                      style=\"width: {group.completionRate}%\"\r\n                    ></div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            {/each}\r\n          </div>\r\n        </div>\r\n      {/if}\r\n\r\n      <!-- Tournament Timeline -->\r\n      <div class=\"glass rounded-lg p-6\">\r\n        <h2 class=\"text-xl font-bold mb-4 text-white flex items-center gap-2\">\r\n          <svg class=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"/>\r\n          </svg>\r\n          Tournament Timeline\r\n        </h2>\r\n\r\n        <div class=\"space-y-4\">\r\n          <!-- Registration Phase -->\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"w-4 h-4 rounded-full bg-cyber-green flex-shrink-0\"></div>\r\n            <div class=\"flex-1\">\r\n              <div class=\"font-bold text-white\">Registration Phase</div>\r\n              <div class=\"text-sm text-gray-400\">\r\n                {tournamentData.players?.length || 0} players registered\r\n                {#if tournamentData.state === 'registration'}\r\n                  <span class=\"text-cyber-green font-bold\">(Current Phase)</span>\r\n                {/if}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Group Stage -->\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"w-4 h-4 rounded-full\r\n              {tournamentData.state === 'group' || tournamentData.state === 'playoffs' || tournamentData.state === 'completed' ?\r\n                'bg-cyber-blue' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n            <div class=\"flex-1\">\r\n              <div class=\"font-bold text-white\">Group Stage</div>\r\n              <div class=\"text-sm text-gray-400\">\r\n                {tournamentData.matches?.filter(m => m.completed).length || 0} of {tournamentData.matches?.length || 0} matches completed\r\n                {#if tournamentData.state === 'group'}\r\n                  <span class=\"text-cyber-blue font-bold\">(Current Phase)</span>\r\n                {/if}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Playoffs -->\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"w-4 h-4 rounded-full\r\n              {tournamentData.state === 'playoffs' || tournamentData.state === 'completed' ?\r\n                'bg-cyber-pink' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n            <div class=\"flex-1\">\r\n              <div class=\"font-bold text-white\">Playoffs</div>\r\n              <div class=\"text-sm text-gray-400\">\r\n                {tournamentData.bracketMatches?.filter(m => m.winnerId).length || 0} of {tournamentData.bracketMatches?.length || 0} matches completed\r\n                {#if tournamentData.state === 'playoffs'}\r\n                  <span class=\"text-cyber-pink font-bold\">(Current Phase)</span>\r\n                {/if}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- Completion -->\r\n          <div class=\"flex items-center gap-4\">\r\n            <div class=\"w-4 h-4 rounded-full\r\n              {tournamentData.state === 'completed' ? 'bg-yellow-400' : 'bg-gray-600'} flex-shrink-0\"></div>\r\n            <div class=\"flex-1\">\r\n              <div class=\"font-bold text-white\">Tournament Complete</div>\r\n              <div class=\"text-sm text-gray-400\">\r\n                {#if tournamentData.state === 'completed'}\r\n                  <span class=\"text-yellow-400 font-bold\">🏆 Champion crowned!</span>\r\n                {:else}\r\n                  Not yet completed\r\n                {/if}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n    {/if}\r\n  </div>\r\n</div>\r\n"
        }
    ]
}